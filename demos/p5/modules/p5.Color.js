/*! p5.p5.Color.js v0.5.11 July 21, 2017 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.p5=t()}}(function(){return function t(e,r,i){function n(s,a){if(!r[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[s]={exports:{}};e[s][0].call(u.exports,function(t){var r=e[s][1][t];return n(r?r:t)},u,u.exports,t,e,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,r){"use strict";var i=t("../core/core");i.ColorConversion={},i.ColorConversion._hsbaToHSLA=function(t){var e=t[0],r=t[1],i=t[2],n=(2-r)*i/2;return 0!==n&&(1===n?r=0:.5>n?r/=2-r:r=r*i/(2-2*n)),[e,r,n,t[3]]},i.ColorConversion._hsbaToRGBA=function(t){var e=6*t[0],r=t[1],i=t[2],n=[];if(0===r)n=[i,i,i,t[3]];else{var o,s,a,h=Math.floor(e),l=i*(1-r),u=i*(1-r*(e-h)),d=i*(1-r*(1+h-e));1===h?(o=u,s=i,a=l):2===h?(o=l,s=i,a=d):3===h?(o=l,s=u,a=i):4===h?(o=d,s=l,a=i):5===h?(o=i,s=l,a=u):(o=i,s=d,a=l),n=[o,s,a,t[3]]}return n},i.ColorConversion._hslaToHSBA=function(t){var e,r=t[0],i=t[1],n=t[2];return e=.5>n?(1+i)*n:n+i-n*i,i=2*(e-n)/e,[r,i,e,t[3]]},i.ColorConversion._hslaToRGBA=function(t){var e=6*t[0],r=t[1],i=t[2],n=[];if(0===r)n=[i,i,i,t[3]];else{var o;o=.5>i?(1+r)*i:i+r-i*r;var s=2*i-o,a=function(t,e,r){return 0>t?t+=6:t>=6&&(t-=6),1>t?e+(r-e)*t:3>t?r:4>t?e+(r-e)*(4-t):e};n=[a(e+2,s,o),a(e,s,o),a(e-2,s,o),t[3]]}return n},i.ColorConversion._rgbaToHSBA=function(t){var e,r,i=t[0],n=t[1],o=t[2],s=Math.max(i,n,o),a=s-Math.min(i,n,o);return 0===a?(e=0,r=0):(r=a/s,i===s?e=(n-o)/a:n===s?e=2+(o-i)/a:o===s&&(e=4+(i-n)/a),0>e?e+=6:e>=6&&(e-=6)),[e/6,r,s,t[3]]},i.ColorConversion._rgbaToHSLA=function(t){var e,r,i=t[0],n=t[1],o=t[2],s=Math.max(i,n,o),a=Math.min(i,n,o),h=s+a,l=s-a;return 0===l?(e=0,r=0):(r=1>h?l/h:l/(2-h),i===s?e=(n-o)/l:n===s?e=2+(o-i)/l:o===s&&(e=4+(i-n)/l),0>e?e+=6:e>=6&&(e-=6)),[e/6,r,h/2,t[3]]},e.exports=i.ColorConversion},{"../core/core":9}],2:[function(t,e,r){"use strict";var i=t("../core/core"),n=t("../core/constants");t("./p5.Color"),i.prototype.alpha=function(t){if(t instanceof i.Color||t instanceof Array)return this.color(t)._getAlpha();throw new Error("Needs p5.Color or pixel array as argument.")},i.prototype.blue=function(t){if(t instanceof i.Color||t instanceof Array)return this.color(t)._getBlue();throw new Error("Needs p5.Color or pixel array as argument.")},i.prototype.brightness=function(t){if(t instanceof i.Color||t instanceof Array)return this.color(t)._getBrightness();throw new Error("Needs p5.Color or pixel array as argument.")},i.prototype.color=function(){return arguments[0]instanceof i.Color?arguments[0]:arguments[0]instanceof Array?this instanceof i.Renderer?new i.Color(this,arguments[0]):new i.Color(this._renderer,arguments[0]):this instanceof i.Renderer?new i.Color(this,arguments):new i.Color(this._renderer,arguments)},i.prototype.green=function(t){if(t instanceof i.Color||t instanceof Array)return this.color(t)._getGreen();throw new Error("Needs p5.Color or pixel array as argument.")},i.prototype.hue=function(t){if(t instanceof i.Color||t instanceof Array)return this.color(t)._getHue();throw new Error("Needs p5.Color or pixel array as argument.")},i.prototype.lerpColor=function(t,e,r){var i,o,s,a,h,l,u=this._renderer._colorMode,d=this._renderer._colorMaxes;if(u===n.RGB)h=t.levels.map(function(t){return t/255}),l=e.levels.map(function(t){return t/255});else if(u===n.HSB)t._getBrightness(),e._getBrightness(),h=t.hsba,l=e.hsba;else{if(u!==n.HSL)throw new Error(u+"cannot be used for interpolation.");t._getLightness(),e._getLightness(),h=t.hsla,l=e.hsla}return r=Math.max(Math.min(r,1),0),"undefined"==typeof this.lerp&&(this.lerp=function(t,e,r){return r*(e-t)+t}),i=this.lerp(h[0],l[0],r),o=this.lerp(h[1],l[1],r),s=this.lerp(h[2],l[2],r),a=this.lerp(h[3],l[3],r),i*=d[u][0],o*=d[u][1],s*=d[u][2],a*=d[u][3],this.color(i,o,s,a)},i.prototype.lightness=function(t){if(t instanceof i.Color||t instanceof Array)return this.color(t)._getLightness();throw new Error("Needs p5.Color or pixel array as argument.")},i.prototype.red=function(t){if(t instanceof i.Color||t instanceof Array)return this.color(t)._getRed();throw new Error("Needs p5.Color or pixel array as argument.")},i.prototype.saturation=function(t){if(t instanceof i.Color||t instanceof Array)return this.color(t)._getSaturation();throw new Error("Needs p5.Color or pixel array as argument.")},e.exports=i},{"../core/constants":8,"../core/core":9,"./p5.Color":3}],3:[function(t,e,r){var i=t("../core/core"),n=t("../core/constants"),o=t("./color_conversion");i.Color=function(t,e){if(this.mode=t._colorMode,this.maxes=t._colorMaxes,this.mode!==n.RGB&&this.mode!==n.HSL&&this.mode!==n.HSB)throw new Error(this.mode+" is an invalid colorMode.");return this._array=i.Color._parseInputs.apply(t,e),this.levels=this._array.map(function(t){return Math.round(255*t)}),this},i.Color.prototype.toString=function(){var t=this.levels,e=this._array[3];return"rgba("+t[0]+","+t[1]+","+t[2]+","+e+")"},i.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},i.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[n.RGB][2]},i.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[n.HSB][2]},i.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[n.RGB][1]},i.Color.prototype._getHue=function(){return this.mode===n.HSB?(this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[n.HSB][0]):(this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[n.HSL][0])},i.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[n.HSL][2]},i.Color.prototype._getRed=function(){return this._array[0]*this.maxes[n.RGB][0]},i.Color.prototype._getSaturation=function(){return this.mode===n.HSB?(this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[n.HSB][1]):(this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[n.HSL][1])};var s={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a=/\s*/,h=/(\d{1,3})/,l=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,u=new RegExp(l.source+"%"),d={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",h.source,",",h.source,",",h.source,"\\)$"].join(a.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",u.source,",",u.source,",",u.source,"\\)$"].join(a.source),"i"),RGBA:new RegExp(["^rgba\\(",h.source,",",h.source,",",h.source,",",l.source,"\\)$"].join(a.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",u.source,",",u.source,",",u.source,",",l.source,"\\)$"].join(a.source),"i"),HSL:new RegExp(["^hsl\\(",h.source,",",u.source,",",u.source,"\\)$"].join(a.source),"i"),HSLA:new RegExp(["^hsla\\(",h.source,",",u.source,",",u.source,",",l.source,"\\)$"].join(a.source),"i"),HSB:new RegExp(["^hsb\\(",h.source,",",u.source,",",u.source,"\\)$"].join(a.source),"i"),HSBA:new RegExp(["^hsba\\(",h.source,",",u.source,",",u.source,",",l.source,"\\)$"].join(a.source),"i")};i.Color._parseInputs=function(){var t=arguments.length,e=this._colorMode,r=this._colorMaxes,a=[];if(t>=3)return a[0]=arguments[0]/r[e][0],a[1]=arguments[1]/r[e][1],a[2]=arguments[2]/r[e][2],"number"==typeof arguments[3]?a[3]=arguments[3]/r[e][3]:a[3]=1,a=a.map(function(t){return Math.max(Math.min(t,1),0)}),e===n.HSL?o._hslaToRGBA(a):e===n.HSB?o._hsbaToRGBA(a):a;if(1===t&&"string"==typeof arguments[0]){var h=arguments[0].trim().toLowerCase();if(s[h])return i.Color._parseInputs.apply(this,[s[h]]);if(d.HEX3.test(h))return a=d.HEX3.exec(h).slice(1).map(function(t){return parseInt(t+t,16)/255}),a[3]=1,a;if(d.HEX6.test(h))return a=d.HEX6.exec(h).slice(1).map(function(t){return parseInt(t,16)/255}),a[3]=1,a;if(d.HEX4.test(h))return a=d.HEX4.exec(h).slice(1).map(function(t){return parseInt(t+t,16)/255});if(d.HEX8.test(h))return a=d.HEX8.exec(h).slice(1).map(function(t){return parseInt(t,16)/255});if(d.RGB.test(h))return a=d.RGB.exec(h).slice(1).map(function(t){return t/255}),a[3]=1,a;if(d.RGB_PERCENT.test(h))return a=d.RGB_PERCENT.exec(h).slice(1).map(function(t){return parseFloat(t)/100}),a[3]=1,a;if(d.RGBA.test(h))return a=d.RGBA.exec(h).slice(1).map(function(t,e){return 3===e?parseFloat(t):t/255});if(d.RGBA_PERCENT.test(h))return a=d.RGBA_PERCENT.exec(h).slice(1).map(function(t,e){return 3===e?parseFloat(t):parseFloat(t)/100});if(d.HSL.test(h)?(a=d.HSL.exec(h).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:parseInt(t,10)/100}),a[3]=1):d.HSLA.test(h)&&(a=d.HSLA.exec(h).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:3===e?parseFloat(t):parseInt(t,10)/100})),a=a.map(function(t){return Math.max(Math.min(t,1),0)}),a.length)return o._hslaToRGBA(a);if(d.HSB.test(h)?(a=d.HSB.exec(h).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:parseInt(t,10)/100}),a[3]=1):d.HSBA.test(h)&&(a=d.HSBA.exec(h).slice(1).map(function(t,e){return 0===e?parseInt(t,10)/360:3===e?parseFloat(t):parseInt(t,10)/100})),a=a.map(function(t){return Math.max(Math.min(t,1),0)}),a.length)return o._hsbaToRGBA(a);a=[1,1,1,1]}else{if(1!==t&&2!==t||"number"!=typeof arguments[0])throw new Error(arguments+"is not a valid color representation.");a[0]=arguments[0]/r[e][2],a[1]=arguments[0]/r[e][2],a[2]=arguments[0]/r[e][2],"number"==typeof arguments[1]?a[3]=arguments[1]/r[e][3]:a[3]=1,a=a.map(function(t){return Math.max(Math.min(t,1),0)})}return a},e.exports=i.Color},{"../core/constants":8,"../core/core":9,"./color_conversion":1}],4:[function(t,e,r){"use strict";var i=t("../core/core"),n=t("../core/constants");t("./p5.Color"),i.prototype.background=function(){return arguments[0]instanceof i.Image?this.image(arguments[0],0,0,this.width,this.height):this._renderer.background.apply(this._renderer,arguments),this},i.prototype.clear=function(){return this._renderer.clear(),this},i.prototype.colorMode=function(){if(arguments[0]===n.RGB||arguments[0]===n.HSB||arguments[0]===n.HSL){this._renderer._colorMode=arguments[0];var t=this._renderer._colorMaxes[this._renderer._colorMode];2===arguments.length?(t[0]=arguments[1],t[1]=arguments[1],t[2]=arguments[1],t[3]=arguments[1]):4===arguments.length?(t[0]=arguments[1],t[1]=arguments[2],t[2]=arguments[3]):5===arguments.length&&(t[0]=arguments[1],t[1]=arguments[2],t[2]=arguments[3],t[3]=arguments[4])}return this},i.prototype.fill=function(){return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),this._renderer.fill.apply(this._renderer,arguments),this},i.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},i.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},i.prototype.stroke=function(){return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),this._renderer.stroke.apply(this._renderer,arguments),this},e.exports=i},{"../core/constants":8,"../core/core":9,"./p5.Color":3}],5:[function(t,e,r){"use strict";var i=t("./core"),n=t("./constants"),o=t("./canvas");t("./error_helpers"),i.prototype.arc=function(t,e,r,i,o,s,a){for(var h=new Array(arguments.length),l=0;l<h.length;++l)h[l]=arguments[l];if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(this._angleMode===n.DEGREES&&(o=this.radians(o),s=this.radians(s));0>o;)o+=n.TWO_PI;for(;0>s;)s+=n.TWO_PI;return o%=n.TWO_PI,s%=n.TWO_PI,s===o&&(s+=n.TWO_PI),o=o<=n.HALF_PI?Math.atan(r/i*Math.tan(o)):o>n.HALF_PI&&o<=3*n.HALF_PI?Math.atan(r/i*Math.tan(o))+n.PI:Math.atan(r/i*Math.tan(o))+n.TWO_PI,s=s<=n.HALF_PI?Math.atan(r/i*Math.tan(s)):s>n.HALF_PI&&s<=3*n.HALF_PI?Math.atan(r/i*Math.tan(s))+n.PI:Math.atan(r/i*Math.tan(s))+n.TWO_PI,o>s&&(s+=n.TWO_PI),r=Math.abs(r),i=Math.abs(i),this._renderer.arc(t,e,r,i,o,s,a),this},i.prototype.ellipse=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];if(3===t.length&&t.push(t[2]),t[2]<0&&(t[2]=Math.abs(t[2])),t[3]<0&&(t[3]=Math.abs(t[3])),!this._renderer._doStroke&&!this._renderer._doFill)return this;var r=o.modeAdjust(t[0],t[1],t[2],t[3],this._renderer._ellipseMode);return t[0]=r.x,t[1]=r.y,t[2]=r.w,t[3]=r.h,this._renderer.ellipse(t),this},i.prototype.line=function(){if(!this._renderer._doStroke)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.line(t[0],t[1],t[2],t[3],t[4],t[5]):this._renderer.line(t[0],t[1],t[2],t[3]),this},i.prototype.point=function(){if(!this._renderer._doStroke)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.point(t[0],t[1],t[2]):this._renderer.point(t[0],t[1]),this},i.prototype.quad=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.quad(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]):this._renderer.quad(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),this},i.prototype.rect=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var r=o.modeAdjust(t[0],t[1],t[2],t[3],this._renderer._rectMode);return t[0]=r.x,t[1]=r.y,t[2]=r.w,t[3]=r.h,this._renderer.rect(t),this},i.prototype.triangle=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.triangle(t),this},e.exports=i},{"./canvas":7,"./constants":8,"./core":9,"./error_helpers":12}],6:[function(t,e,r){"use strict";var i=t("./core"),n=t("./constants");i.prototype.ellipseMode=function(t){return(t===n.CORNER||t===n.CORNERS||t===n.RADIUS||t===n.CENTER)&&(this._renderer._ellipseMode=t),this},i.prototype.noSmooth=function(){return this._renderer.noSmooth(),this},i.prototype.rectMode=function(t){return(t===n.CORNER||t===n.CORNERS||t===n.RADIUS||t===n.CENTER)&&(this._renderer._rectMode=t),this},i.prototype.smooth=function(){return this._renderer.smooth(),this},i.prototype.strokeCap=function(t){return(t===n.ROUND||t===n.SQUARE||t===n.PROJECT)&&this._renderer.strokeCap(t),this},i.prototype.strokeJoin=function(t){return(t===n.ROUND||t===n.BEVEL||t===n.MITER)&&this._renderer.strokeJoin(t),this},i.prototype.strokeWeight=function(t){return this._renderer.strokeWeight(t),this},e.exports=i},{"./constants":8,"./core":9}],7:[function(t,e,r){var i=t("./constants");e.exports={modeAdjust:function(t,e,r,n,o){return o===i.CORNER?{x:t,y:e,w:r,h:n}:o===i.CORNERS?{x:t,y:e,w:r-t,h:n-e}:o===i.RADIUS?{x:t-r,y:e-n,w:2*r,h:2*n}:o===i.CENTER?{x:t-.5*r,y:e-.5*n,w:r,h:n}:void 0},arcModeAdjust:function(t,e,r,n,o){return o===i.CORNER?{x:t+.5*r,y:e+.5*n,w:r,h:n}:o===i.CORNERS?{x:t,y:e,w:r+t,h:n+e}:o===i.RADIUS?{x:t,y:e,w:2*r,h:2*n}:o===i.CENTER?{x:t,y:e,w:r,h:n}:void 0}}},{"./constants":8}],8:[function(t,e,r){var i=Math.PI;e.exports={P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:i/2,PI:i,QUARTER_PI:i/4,TAU:2*i,TWO_PI:2*i,DEGREES:"degrees",RADIANS:"radians",DEG_TO_RAD:i/180,RAD_TO_DEG:180/i,CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:0,LINES:1,LINE_STRIP:3,LINE_LOOP:2,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",HSL:"hsl",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"source-over",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"copy",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",LANDSCAPE:"landscape",PORTRAIT:"portrait",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}},{}],9:[function(t,e,r){"use strict";t("./shim");var i=t("./constants"),n=function(t,e,r){2===arguments.length&&"boolean"==typeof e&&(r=e,e=void 0),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=e,this._curElement=null,this._elements=[],this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._styles=[],this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._events.wheel=null,this._loadingScreenId="p5_loading",window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){this._userNode&&"string"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode));var t=this.preload||window.preload;if(t){var e=document.getElementById(this._loadingScreenId);if(!e){e=document.createElement("div"),e.innerHTML="Loading...",e.style.position="absolute",e.id=this._loadingScreenId;var r=this._userNode||document.body;r.appendChild(e)}for(var i in this._preloadMethods){this._preloadMethods[i]=this._preloadMethods[i]||n;var o=this._preloadMethods[i];(o===n.prototype||o===n)&&(o=this._isGlobal?window:this),this._registeredPreloadMethods[i]=o[i],o[i]=this._wrapPreload(o,i)}t(),this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this),this._runIfPreloadsAreDone=function(){var t=this._isGlobal?window:this;if(0===t._preloadCount){var e=document.getElementById(t._loadingScreenId);e&&e.parentNode.removeChild(e),t._setup(),t._runFrames(),t._draw()}},this._decrementPreload=function(){var t=this._isGlobal?window:this;"function"==typeof t.preload&&(t._setProperty("_preloadCount",t._preloadCount-1),t._runIfPreloadsAreDone())},this._wrapPreload=function(t,e){return function(){this._incrementPreload();for(var r=new Array(arguments.length),i=0;i<r.length;++i)r[i]=arguments[i];return this._registeredPreloadMethods[e].apply(t,r)}.bind(this)},this._incrementPreload=function(){var t=this._isGlobal?window:this;t._setProperty("_preloadCount",t._preloadCount+1)},this._setup=function(){this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0);var t=this._isGlobal?window:this;if("function"==typeof t.preload)for(var e in this._preloadMethods)t[e]=this._preloadMethods[e][e],t[e]&&this&&(t[e]=t[e].bind(this));"function"==typeof t.setup&&t.setup();for(var r=document.getElementsByTagName("canvas"),i=0;i<r.length;i++){var n=r[i];"true"===n.dataset.hidden&&(n.style.visibility="",delete n.dataset.hidden)}this._setupDone=!0}.bind(this),this._draw=function(){var t=window.performance.now(),e=t-this._lastFrameTime,r=1e3/this._targetFrameRate,i=5;(!this._loop||e>=r-i)&&(this._setProperty("frameCount",this.frameCount+1),this.redraw(),this._frameRate=1e3/(t-this._lastFrameTime),this._lastFrameTime=t,"undefined"!=typeof this._updateMouseCoords&&this._updateMouseCoords()),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this),this._setProperty=function(t,e){this[t]=e,this._isGlobal&&(window[t]=e)}.bind(this),this.remove=function(){if(this._curElement){this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId);for(var t in this._events)window.removeEventListener(t,this._events[t]);for(var e=0;e<this._elements.length;e++){var r=this._elements[e];r.elt.parentNode&&r.elt.parentNode.removeChild(r.elt);for(var i in r._events)r.elt.removeEventListener(i,r._events[i])}var o=this;if(this._registeredMethods.remove.forEach(function(t){"undefined"!=typeof t&&t.call(o)}),this._isGlobal){for(var s in n.prototype)try{delete window[s]}catch(a){window[s]=void 0}for(var h in this)if(this.hasOwnProperty(h))try{delete window[h]}catch(a){window[h]=void 0}}}}.bind(this),this._registeredMethods.init.forEach(function(t){"undefined"!=typeof t&&t.call(this)},this);var i=this._createFriendlyGlobalFunctionBinder();if(t)t(this);else{this._isGlobal=!0,n.instance=this;for(var o in n.prototype)if("function"==typeof n.prototype[o]){var s=o.substring(2);this._events.hasOwnProperty(s)||(Math.hasOwnProperty(o)&&Math[o]===n.prototype[o]?i(o,n.prototype[o]):i(o,n.prototype[o].bind(this)))}else i(o,n.prototype[o]);for(var a in this)this.hasOwnProperty(a)&&i(a,this[a])}for(var h in this._events){var l=this["_on"+h];if(l){var u=l.bind(this);window.addEventListener(h,u,{passive:!1}),this._events[h]=u}}var d=function(){this._setProperty("focused",!0)}.bind(this),p=function(){this._setProperty("focused",!1)}.bind(this);window.addEventListener("focus",d),window.addEventListener("blur",p),this.registerMethod("remove",function(){window.removeEventListener("focus",d),window.removeEventListener("blur",p)}),r?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};n.instance=null,n.disableFriendlyErrors=!1;for(var o in i)n.prototype[o]=i[o];n.prototype._preloadMethods={loadJSON:n.prototype,loadImage:n.prototype,loadStrings:n.prototype,loadXML:n.prototype,loadShape:n.prototype,loadTable:n.prototype,loadFont:n.prototype,loadModel:n.prototype},n.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},n.prototype._registeredPreloadMethods={},n.prototype.registerPreloadMethod=function(t,e){n.prototype._preloadMethods.hasOwnProperty(t)||(n.prototype._preloadMethods[t]=e)},n.prototype.registerMethod=function(t,e){n.prototype._registeredMethods.hasOwnProperty(t)||(n.prototype._registeredMethods[t]=[]),n.prototype._registeredMethods[t].push(e)},n.prototype._createFriendlyGlobalFunctionBinder=function(t){t=t||{};var e=t.globalObject||window,r=t.log||console.log.bind(console),i={print:!0};return function(t,o){if(n.disableFriendlyErrors||"undefined"!=typeof IS_MINIFIED||"function"!=typeof o||t in n.prototype._preloadMethods)e[t]=o;else try{if(t in e&&!(t in i))throw new Error('global "'+t+'" already exists');Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return o},set:function(i){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}),r('You just changed the value of "'+t+"\", which was a p5 function. This could cause problems later if you're not careful.")}})}catch(s){r('p5 had problems creating the global function "'+t+'", possibly because your code is already using that name as a variable. You may want to rename your variable to something else.'),e[t]=o}}},e.exports=n},{"./constants":8,"./shim":19}],10:[function(t,e,r){"use strict";var i=t("./core");t("./error_helpers");var n=20,o=20;i.prototype.bezier=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer._doStroke||this._renderer._doFill?(this._renderer.isP3D?(t.push(n),this._renderer.bezier(t)):this._renderer.bezier(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),this):this},i.prototype.bezierDetail=function(t){return n=t,this},i.prototype.bezierPoint=function(t,e,r,i,n){var o=1-n;return Math.pow(o,3)*t+3*Math.pow(o,2)*n*e+3*o*Math.pow(n,2)*r+Math.pow(n,3)*i},i.prototype.bezierTangent=function(t,e,r,i,n){var o=1-n;return 3*i*Math.pow(n,2)-3*r*Math.pow(n,2)+6*r*o*n-6*e*o*n+3*e*Math.pow(o,2)-3*t*Math.pow(o,2)},i.prototype.curve=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer._doStroke?(this._renderer.isP3D?(t.push(o),this._renderer.curve(t)):this._renderer.curve(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),this):this},i.prototype.curveDetail=function(t){return o=t,this},i.prototype.curveTightness=function(t){this._renderer._curveTightness=t},i.prototype.curvePoint=function(t,e,r,i,n){var o=n*n*n,s=n*n,a=-.5*o+s-.5*n,h=1.5*o-2.5*s+1,l=-1.5*o+2*s+.5*n,u=.5*o-.5*s;return t*a+e*h+r*l+i*u},i.prototype.curveTangent=function(t,e,r,i,n){var o=n*n,s=-3*o/2+2*n-.5,a=9*o/2-5*n,h=-9*o/2+4*n+.5,l=3*o/2-n;return t*s+e*a+r*h+i*l},e.exports=i},{"./core":9,"./error_helpers":12}],11:[function(t,e,r){"use strict";function i(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function n(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}function o(t){var e=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!e)throw new Error("Fullscreen not enabled in this browser.");t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}function s(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var a=t("./core"),h=t("./constants"),l=[h.ARROW,h.CROSS,h.HAND,h.MOVE,h.TEXT,h.WAIT];a.prototype._frameRate=0,a.prototype._lastFrameTime=window.performance.now(),a.prototype._targetFrameRate=60;var u=window.print;window.console&&console.log?a.prototype.print=function(t){try{if(0===arguments.length)u();else if(arguments.length>1)console.log.apply(console,arguments);else{var e=JSON.parse(JSON.stringify(t));"{}"===JSON.stringify(e)?console.log(t):console.log(e)}}catch(r){console.log(t)}}:a.prototype.print=function(){},a.prototype.frameCount=0,a.prototype.focused=document.hasFocus(),a.prototype.cursor=function(t,e,r){var i="auto",n=this._curElement.elt;if(l.indexOf(t)>-1)i=t;else if("string"==typeof t){var o="";e&&r&&"number"==typeof e&&"number"==typeof r&&(o=e+" "+r),i="http://"===t.substring(0,7)||"https://"===t.substring(0,8)?"url("+t+") "+o+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(t)?"url("+t+") "+o+", auto":t}n.style.cursor=i},a.prototype.frameRate=function(t){return"number"!=typeof t||0>t?this._frameRate:(this._setProperty("_targetFrameRate",t),this._runFrames(),this)},a.prototype.getFrameRate=function(){return this.frameRate()},a.prototype.setFrameRate=function(t){return this.frameRate(t)},a.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},a.prototype.displayWidth=screen.width,a.prototype.displayHeight=screen.height,a.prototype.windowWidth=i(),a.prototype.windowHeight=n(),a.prototype._onresize=function(t){this._setProperty("windowWidth",i()),this._setProperty("windowHeight",n());var e,r=this._isGlobal?window:this;"function"==typeof r.windowResized&&(e=r.windowResized(t),void 0===e||e||t.preventDefault())},a.prototype.width=0,a.prototype.height=0,a.prototype.fullscreen=function(t){return"undefined"==typeof t?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(t?o(document.documentElement):s())},a.prototype.pixelDensity=function(t){return"number"!=typeof t?this._pixelDensity:(this._pixelDensity=t,void this.resizeCanvas(this.width,this.height,!0))},a.prototype.displayDensity=function(){return window.devicePixelRatio},a.prototype.getURL=function(){return location.href},a.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(t){return""!==t})},a.prototype.getURLParams=function(){for(var t,e=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,r={};null!=(t=e.exec(location.search));)t.index===e.lastIndex&&e.lastIndex++,r[t[1]]=t[2];return r},e.exports=a},{"./constants":8,"./core":9}],12:[function(t,e,r){"use strict";function i(t,e,r){h&&(n(),h=!1),"undefined"===c(r)?r="#B40033":"number"===c(r)&&(r=m[r])}function n(){var t="transparent",e="#ED225D",r="#ED225D",i="white";console.log("%c    _ \n /\\| |/\\ \n \\ ` ' /  \n / , . \\  \n \\/|_|\\/ \n\n%c> p5.js says: Welcome! This is your friendly debugger. To turn me off switch to using \u201cp5.min.js\u201d.","background-color:"+t+";color:"+e+";","background-color:"+r+";color:"+i+";")}function o(){var e={},r=function(t){return Object.getOwnPropertyNames(t).filter(function(t){return"_"===t[0]?!1:t in e?!1:(e[t]=!0,!0)}).map(function(e){var r;return r="function"==typeof t[e]?"function":e===e.toUpperCase()?"constant":"variable",{name:e,type:r}})};_=[].concat(r(a.prototype),r(t("./constants"))),_.sort(function(t,e){return e.name.length-t.name.length})}function s(t,e){e||(e=console.log.bind(console)),_||o(),_.some(function(r){return t.message&&null!==t.message.match("\\W?"+r.name+"\\W")?(e("%cDid you just try to use p5.js's "+r.name+("function"===r.type?"() ":" ")+r.type+"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: "+y,"color: #B40033"),!0):void 0})}for(var a=t("./core"),h=!1,l={},u=l.toString,d=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],p=0;p<d.length;p++)l["[object "+d[p]+"]"]=d[p].toLowerCase();
var c=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[u.call(t)]||"object":typeof t},f=3,m=["#2D7BB6","#EE9900","#4DB200","#C83C00"],g={0:{fileType:"image",method:"loadImage",message:" hosting the image online,"},1:{fileType:"XML file",method:"loadXML"},2:{fileType:"table file",method:"loadTable"},3:{fileType:"text file",method:"loadStrings"},4:{fileType:"font",method:"loadFont",message:" hosting the font online,"}};a._friendlyFileLoadError=function(t,e){var r=g[t],n="It looks like there was a problem loading your "+r.fileType+". Try checking if the file path%c ["+e+"] %cis correct,"+(r.message||"")+" or running a local server.";i(n,r.method,f)};var _=null,y="https://github.com/processing/p5.js/wiki/Frequently-Asked-Questions#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";a.prototype._helpForMisusedAtTopLevelCode=s,"complete"!==document.readyState&&(window.addEventListener("error",s,!1),window.addEventListener("load",function(){window.removeEventListener("error",s,!1)})),e.exports=a},{"./constants":8,"./core":9}],13:[function(t,e,r){var i=t("../core/core"),n=function(){window.PHANTOMJS||window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!i.instance&&new i};"complete"===document.readyState?n():window.addEventListener("load",n,!1)},{"../core/core":9}],14:[function(t,e,r){function i(t,e,r){var i=e.bind(r);r.elt.addEventListener(t,i,!1),r._events[t]=i}var n=t("./core");n.Element=function(t,e){this.elt=t,this._pInst=e,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},n.Element.prototype.parent=function(t){return 0===arguments.length?this.elt.parentNode:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof n.Element&&(t=t.elt),t.appendChild(this.elt),this)},n.Element.prototype.id=function(t){return 0===arguments.length?this.elt.id:(this.elt.id=t,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},n.Element.prototype["class"]=function(t){return 0===arguments.length?this.elt.className:(this.elt.className=t,this)},n.Element.prototype.mousePressed=function(t){return i("mousedown",t,this),i("touchstart",t,this),this},n.Element.prototype.doubleClicked=function(t){return i("doubleClicked",t,this),this},n.Element.prototype.mouseWheel=function(t){return i("wheel",t,this),this},n.Element.prototype.mouseReleased=function(t){return i("mouseup",t,this),i("touchend",t,this),this},n.Element.prototype.mouseClicked=function(t){return i("click",t,this),this},n.Element.prototype.mouseMoved=function(t){return i("mousemove",t,this),i("touchmove",t,this),this},n.Element.prototype.mouseOver=function(t){return i("mouseover",t,this),this},n.Element.prototype.changed=function(t){return i("change",t,this),this},n.Element.prototype.input=function(t){return i("input",t,this),this},n.Element.prototype.mouseOut=function(t){return i("mouseout",t,this),this},n.Element.prototype.touchStarted=function(t){return i("touchstart",t,this),i("mousedown",t,this),this},n.Element.prototype.touchMoved=function(t){return i("touchmove",t,this),i("mousemove",t,this),this},n.Element.prototype.touchEnded=function(t){return i("touchend",t,this),i("mouseup",t,this),this},n.Element.prototype.dragOver=function(t){return i("dragover",t,this),this},n.Element.prototype.dragLeave=function(t){return i("dragleave",t,this),this},n.Element.prototype.drop=function(t,e){function r(e){var r=new n.File(e);return function(e){r.data=e.target.result,t(r)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(i("dragover",function(t){t.stopPropagation(),t.preventDefault()},this),i("dragleave",function(t){t.stopPropagation(),t.preventDefault()},this),arguments.length>1&&i("drop",e,this),i("drop",function(t){t.stopPropagation(),t.preventDefault();for(var e=t.dataTransfer.files,i=0;i<e.length;i++){var n=e[i],o=new FileReader;o.onload=r(n),n.type.indexOf("text")>-1?o.readAsText(n):o.readAsDataURL(n)}},this)):console.log("The File APIs are not fully supported in this browser."),this},n.Element.prototype._setProperty=function(t,e){this[t]=e},e.exports=n.Element},{"./core":9}],15:[function(t,e,r){var i=t("./core"),n=t("./constants");i.Graphics=function(t,e,r,o){var s=r||n.P2D;this.canvas=document.createElement("canvas");var a=this._userNode||document.body;a.appendChild(this.canvas),i.Element.call(this,this.canvas,o,!1),this._styles=[],this.width=t,this.height=e,this._pixelDensity=o._pixelDensity,s===n.WEBGL?this._renderer=new i.RendererGL(this.canvas,this,!1):this._renderer=new i.Renderer2D(this.canvas,this,!1),this._renderer.resize(t,e),this._renderer._applyDefaults(),o._elements.push(this);for(var h in i.prototype)this[h]||("function"==typeof i.prototype[h]?this[h]=i.prototype[h].bind(this):this[h]=i.prototype[h]);return this},i.Graphics.prototype=Object.create(i.Element.prototype),i.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);for(var t in this._events)this.elt.removeEventListener(t,this._events[t])},e.exports=i.Graphics},{"./constants":8,"./core":9}],16:[function(t,e,r){function i(t){var e=0,r=0;if(t.offsetParent){do e+=t.offsetLeft,r+=t.offsetTop;while(t=t.offsetParent)}else e+=t.offsetLeft,r+=t.offsetTop;return[e,r]}var n=t("./core"),o=t("../core/constants");n.Renderer=function(t,e,r){n.Element.call(this,t,e),this.canvas=t,this._pInst=e,r?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=o.NORMAL,this._textAscent=null,this._textDescent=null,this._rectMode=o.CORNER,this._ellipseMode=o.CENTER,this._curveTightness=0,this._imageMode=o.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._colorMode=o.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}},n.Renderer.prototype=Object.create(n.Element.prototype),n.Renderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.elt.width=t*this._pInst._pixelDensity,this.elt.height=e*this._pInst._pixelDensity,this.elt.style.width=t+"px",this.elt.style.height=e+"px",this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},n.Renderer.prototype.textLeading=function(t){return arguments.length&&arguments[0]?(this._setProperty("_textLeading",t),this):this._textLeading},n.Renderer.prototype.textSize=function(t){return arguments.length&&arguments[0]?(this._setProperty("_textSize",t),this._setProperty("_textLeading",t*o._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},n.Renderer.prototype.textStyle=function(t){return arguments.length&&arguments[0]?((t===o.NORMAL||t===o.ITALIC||t===o.BOLD)&&this._setProperty("_textStyle",t),this._applyTextProperties()):this._textStyle},n.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},n.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},n.Renderer.prototype._applyDefaults=function(){return this},n.Renderer.prototype._isOpenType=function(t){return t=t||this._textFont,"object"==typeof t&&t.font&&t.font.supported},n.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var t=document.createElement("span");t.style.fontFamily=this._textFont,t.style.fontSize=this._textSize+"px",t.innerHTML="ABCjgq|";var e=document.createElement("div");e.style.display="inline-block",e.style.width="1px",e.style.height="0px";var r=document.createElement("div");r.appendChild(t),r.appendChild(e),r.style.height="0px",r.style.overflow="hidden",document.body.appendChild(r),e.style.verticalAlign="baseline";var n=i(e),o=i(t),s=n[1]-o[1];e.style.verticalAlign="bottom",n=i(e),o=i(t);var a=n[1]-o[1],h=a-s;return document.body.removeChild(r),this._setProperty("_textAscent",s),this._setProperty("_textDescent",h),this},e.exports=n.Renderer},{"../core/constants":8,"./core":9}],17:[function(t,e,r){var i=t("./core"),n=t("./canvas"),o=t("./constants"),s=t("../image/filters");t("./p5.Renderer");var a="rgba(0,0,0,0)";i.Renderer2D=function(t,e,r){return i.Renderer.call(this,t,e,r),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},i.Renderer2D.prototype=Object.create(i.Renderer.prototype),i.Renderer2D.prototype._applyDefaults=function(){this._setFill(o._DEFAULT_FILL),this._setStroke(o._DEFAULT_STROKE),this.drawingContext.lineCap=o.ROUND,this.drawingContext.font="normal 12px sans-serif"},i.Renderer2D.prototype.resize=function(t,e){i.Renderer.prototype.resize.call(this,t,e),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},i.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),arguments[0]instanceof i.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var t=this._getFill(),e=this._pInst.color.apply(this,arguments),r=e.toString();this._setFill(r),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(t)}this.drawingContext.restore()},i.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)},i.Renderer2D.prototype.fill=function(){var t=this._pInst.color.apply(this,arguments);this._setFill(t.toString())},i.Renderer2D.prototype.stroke=function(){var t=this._pInst.color.apply(this,arguments);this._setStroke(t.toString())},i.Renderer2D.prototype.image=function(t,e,r,n,o,s,a,h,l){var u;try{this._tint&&(i.MediaElement&&t instanceof i.MediaElement&&t.loadPixels(),t.canvas&&(u=this._getTintedImageCanvas(t))),u||(u=t.canvas||t.elt),this.drawingContext.drawImage(u,e,r,n,o,s,a,h,l)}catch(d){if("NS_ERROR_NOT_AVAILABLE"!==d.name)throw d}},i.Renderer2D.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var e=s._toPixels(t.canvas),r=document.createElement("canvas");r.width=t.canvas.width,r.height=t.canvas.height;for(var i=r.getContext("2d"),n=i.createImageData(t.canvas.width,t.canvas.height),o=n.data,a=0;a<e.length;a+=4){var h=e[a],l=e[a+1],u=e[a+2],d=e[a+3];o[a]=h*this._tint[0]/255,o[a+1]=l*this._tint[1]/255,o[a+2]=u*this._tint[2]/255,o[a+3]=d*this._tint[3]/255}return i.putImageData(n,0,0),r},i.Renderer2D.prototype.blendMode=function(t){this.drawingContext.globalCompositeOperation=t},i.Renderer2D.prototype.blend=function(){var t=this.drawingContext.globalCompositeOperation,e=arguments[arguments.length-1],r=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=e,this._pInst?this._pInst.copy.apply(this._pInst,r):this.copy.apply(this,r),this.drawingContext.globalCompositeOperation=t},i.Renderer2D.prototype.copy=function(){var t,e,r,n,o,s,a,h,l;if(9===arguments.length)t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3],o=arguments[4],s=arguments[5],a=arguments[6],h=arguments[7],l=arguments[8];else{if(8!==arguments.length)throw new Error("Signature not supported");t=this._pInst,e=arguments[0],r=arguments[1],n=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5],h=arguments[6],l=arguments[7]}i.Renderer2D._copyHelper(t,e,r,n,o,s,a,h,l)},i.Renderer2D._copyHelper=function(t,e,r,i,n,o,s,a,h){t.loadPixels();var l=t.canvas.width/t.width;this.drawingContext.drawImage(t.canvas,l*e,l*r,l*i,l*n,o,s,a,h)},i.Renderer2D.prototype.get=function(t,e,r,n){if(void 0===t&&void 0===e&&void 0===r&&void 0===n?(t=0,e=0,r=this.width,n=this.height):void 0===r&&void 0===n&&(r=1,n=1),0>t+r||0>e+n||t>this.width||e>this.height)return[0,0,0,255];var o=this._pInst||this;o.loadPixels();var s=o._pixelDensity;t=Math.floor(t),e=Math.floor(e),r=Math.floor(r),n=Math.floor(n);var a=t*s,h=e*s;if(1===r&&1===n){var l=this.drawingContext.getImageData(a,h,1,1).data;return[l[0],l[1],l[2],l[3]]}var u=Math.min(r,o.width),d=Math.min(n,o.height),p=u*s,c=d*s,f=new i.Image(u,d);return f.canvas.getContext("2d").drawImage(this.canvas,a,h,p,c,0,0,u,d),f},i.Renderer2D.prototype.loadPixels=function(){var t=this._pixelDensity||this._pInst._pixelDensity,e=this.width*t,r=this.height*t,i=this.drawingContext.getImageData(0,0,e,r);this._pInst?(this._pInst._setProperty("imageData",i),this._pInst._setProperty("pixels",i.data)):(this._setProperty("imageData",i),this._setProperty("pixels",i.data))},i.Renderer2D.prototype.set=function(t,e,r){if(t=Math.floor(t),e=Math.floor(e),r instanceof i.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this.drawingContext.drawImage(r.canvas,t,e),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var n=this._pInst||this,o=0,s=0,a=0,h=0,l=4*(e*n._pixelDensity*(this.width*n._pixelDensity)+t*n._pixelDensity);if(n.imageData||n.loadPixels.call(n),"number"==typeof r)l<n.pixels.length&&(o=r,s=r,a=r,h=255);else if(r instanceof Array){if(r.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");l<n.pixels.length&&(o=r[0],s=r[1],a=r[2],h=r[3])}else r instanceof i.Color&&l<n.pixels.length&&(o=r.levels[0],s=r.levels[1],a=r.levels[2],h=r.levels[3]);for(var u=0;u<n._pixelDensity;u++)for(var d=0;d<n._pixelDensity;d++)l=4*((e*n._pixelDensity+d)*this.width*n._pixelDensity+(t*n._pixelDensity+u)),n.pixels[l]=o,n.pixels[l+1]=s,n.pixels[l+2]=a,n.pixels[l+3]=h}},i.Renderer2D.prototype.updatePixels=function(t,e,r,i){var n=this._pixelDensity||this._pInst._pixelDensity;void 0===t&&void 0===e&&void 0===r&&void 0===i&&(t=0,e=0,r=this.width,i=this.height),r*=n,i*=n,this._pInst?this.drawingContext.putImageData(this._pInst.imageData,t,e,0,0,r,i):this.drawingContext.putImageData(this.imageData,t,e,0,0,r,i)},i.Renderer2D.prototype._acuteArcToBezier=function(t,e){var r=e/2,i=Math.cos(r),n=Math.sin(r),o=1/Math.tan(r),s=t+r,a=Math.cos(s),h=Math.sin(s),l=(4-i)/3,u=n+(i-l)*o;return{ax:Math.cos(t),ay:Math.sin(t),bx:l*a+u*h,by:l*h-u*a,cx:l*a-u*h,cy:l*h+u*a,dx:Math.cos(t+e),dy:Math.sin(t+e)}},i.Renderer2D.prototype.arc=function(t,e,r,i,s,a,h){for(var l=this.drawingContext,u=n.arcModeAdjust(t,e,r,i,this._ellipseMode),d=u.w/2,p=u.h/2,c=1e-5,f=0,m=[];a-s>c;)f=Math.min(a-s,o.HALF_PI),m.push(this._acuteArcToBezier(s,f)),s+=f;return this._doFill&&(l.beginPath(),m.forEach(function(t,e){0===e&&l.moveTo(u.x+t.ax*d,u.y+t.ay*p),l.bezierCurveTo(u.x+t.bx*d,u.y+t.by*p,u.x+t.cx*d,u.y+t.cy*p,u.x+t.dx*d,u.y+t.dy*p)}),(h===o.PIE||null==h)&&l.lineTo(u.x,u.y),l.closePath(),l.fill()),this._doStroke&&(l.beginPath(),m.forEach(function(t,e){0===e&&l.moveTo(u.x+t.ax*d,u.y+t.ay*p),l.bezierCurveTo(u.x+t.bx*d,u.y+t.by*p,u.x+t.cx*d,u.y+t.cy*p,u.x+t.dx*d,u.y+t.dy*p)}),h===o.PIE?(l.lineTo(u.x,u.y),l.closePath()):h===o.CHORD&&l.closePath(),l.stroke()),this},i.Renderer2D.prototype.ellipse=function(t){var e=this.drawingContext,r=this._doFill,i=this._doStroke,n=t[0],o=t[1],s=t[2],h=t[3];if(r&&!i){if(this._getFill()===a)return this}else if(!r&&i&&this._getStroke()===a)return this;var l=.5522847498,u=s/2*l,d=h/2*l,p=n+s,c=o+h,f=n+s/2,m=o+h/2;e.beginPath(),e.moveTo(n,m),e.bezierCurveTo(n,m-d,f-u,o,f,o),e.bezierCurveTo(f+u,o,p,m-d,p,m),e.bezierCurveTo(p,m+d,f+u,c,f,c),e.bezierCurveTo(f-u,c,n,m+d,n,m),e.closePath(),r&&e.fill(),i&&e.stroke()},i.Renderer2D.prototype.line=function(t,e,r,i){var n=this.drawingContext;return this._doStroke?this._getStroke()===a?this:(n.lineWidth%2===1&&n.translate(.5,.5),n.beginPath(),n.moveTo(t,e),n.lineTo(r,i),n.stroke(),n.lineWidth%2===1&&n.translate(-.5,-.5),this):this},i.Renderer2D.prototype.point=function(t,e){var r=this.drawingContext;return this._doStroke?this._getStroke()===a?this:(t=Math.round(t),e=Math.round(e),void(r.lineWidth>1?(r.beginPath(),r.arc(t,e,r.lineWidth/2,0,o.TWO_PI,!1),r.fill()):r.fillRect(t,e,1,1))):this},i.Renderer2D.prototype.quad=function(t,e,r,i,n,o,s,h){var l=this.drawingContext,u=this._doFill,d=this._doStroke;if(u&&!d){if(this._getFill()===a)return this}else if(!u&&d&&this._getStroke()===a)return this;return l.beginPath(),l.moveTo(t,e),l.lineTo(r,i),l.lineTo(n,o),l.lineTo(s,h),l.closePath(),u&&l.fill(),d&&l.stroke(),this},i.Renderer2D.prototype.rect=function(t){var e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],h=t[6],l=t[7],u=this.drawingContext,d=this._doFill,p=this._doStroke;if(d&&!p){if(this._getFill()===a)return this}else if(!d&&p&&this._getStroke()===a)return this;if(this._doStroke&&u.lineWidth%2===1&&u.translate(.5,.5),u.beginPath(),"undefined"==typeof o)u.rect(e,r,i,n);else{"undefined"==typeof s&&(s=o),"undefined"==typeof h&&(h=s),"undefined"==typeof l&&(l=h);var c=i/2,f=n/2;2*o>i&&(o=c),2*o>n&&(o=f),2*s>i&&(s=c),2*s>n&&(s=f),2*h>i&&(h=c),2*h>n&&(h=f),2*l>i&&(l=c),2*l>n&&(l=f),u.beginPath(),u.moveTo(e+o,r),u.arcTo(e+i,r,e+i,r+n,s),u.arcTo(e+i,r+n,e,r+n,h),u.arcTo(e,r+n,e,r,l),u.arcTo(e,r,e+i,r,o),u.closePath()}return this._doFill&&u.fill(),this._doStroke&&u.stroke(),this._doStroke&&u.lineWidth%2===1&&u.translate(-.5,-.5),this},i.Renderer2D.prototype.triangle=function(t){var e=this.drawingContext,r=this._doFill,i=this._doStroke,n=t[0],o=t[1],s=t[2],h=t[3],l=t[4],u=t[5];if(r&&!i){if(this._getFill()===a)return this}else if(!r&&i&&this._getStroke()===a)return this;e.beginPath(),e.moveTo(n,o),e.lineTo(s,h),e.lineTo(l,u),e.closePath(),r&&e.fill(),i&&e.stroke()},i.Renderer2D.prototype.endShape=function(t,e,r,i,n,s,a){if(0===e.length)return this;if(!this._doStroke&&!this._doFill)return this;var h,l=t===o.CLOSE;l&&!s&&e.push(e[0]);var u,d,p=e.length;if(!r||a!==o.POLYGON&&null!==a)if(!i||a!==o.POLYGON&&null!==a)if(!n||a!==o.POLYGON&&null!==a)if(a===o.POINTS)for(u=0;p>u;u++)h=e[u],this._doStroke&&this._pInst.stroke(h[6]),this._pInst.point(h[0],h[1]);else if(a===o.LINES)for(u=0;p>u+1;u+=2)h=e[u],this._doStroke&&this._pInst.stroke(e[u+1][6]),this._pInst.line(h[0],h[1],e[u+1][0],e[u+1][1]);else if(a===o.TRIANGLES)for(u=0;p>u+2;u+=3)h=e[u],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0],h[1]),this.drawingContext.lineTo(e[u+1][0],e[u+1][1]),this.drawingContext.lineTo(e[u+2][0],e[u+2][1]),this.drawingContext.lineTo(h[0],h[1]),this._doFill&&(this._pInst.fill(e[u+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(e[u+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(a===o.TRIANGLE_STRIP)for(u=0;p>u+1;u++)h=e[u],this.drawingContext.beginPath(),this.drawingContext.moveTo(e[u+1][0],e[u+1][1]),this.drawingContext.lineTo(h[0],h[1]),this._doStroke&&this._pInst.stroke(e[u+1][6]),this._doFill&&this._pInst.fill(e[u+1][5]),p>u+2&&(this.drawingContext.lineTo(e[u+2][0],e[u+2][1]),this._doStroke&&this._pInst.stroke(e[u+2][6]),this._doFill&&this._pInst.fill(e[u+2][5])),this._doFillStrokeClose();else if(a===o.TRIANGLE_FAN){if(p>2){for(this.drawingContext.beginPath(),u=2;p>u;u++)h=e[u],this.drawingContext.moveTo(e[0][0],e[0][1]),this.drawingContext.lineTo(e[u-1][0],e[u-1][1]),this.drawingContext.lineTo(h[0],h[1]),this.drawingContext.lineTo(e[0][0],e[0][1]),p-1>u&&(this._doFill&&h[5]!==e[u+1][5]||this._doStroke&&h[6]!==e[u+1][6])&&(this._doFill&&(this._pInst.fill(h[5]),this.drawingContext.fill(),this._pInst.fill(e[u+1][5])),this._doStroke&&(this._pInst.stroke(h[6]),this.drawingContext.stroke(),this._pInst.stroke(e[u+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose()}}else if(a===o.QUADS)for(u=0;p>u+3;u+=4){for(h=e[u],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0],h[1]),d=1;4>d;d++)this.drawingContext.lineTo(e[u+d][0],e[u+d][1]);this.drawingContext.lineTo(h[0],h[1]),this._doFill&&this._pInst.fill(e[u+3][5]),this._doStroke&&this._pInst.stroke(e[u+3][6]),this._doFillStrokeClose()}else if(a===o.QUAD_STRIP){if(p>3)for(u=0;p>u+1;u+=2)h=e[u],this.drawingContext.beginPath(),p>u+3?(this.drawingContext.moveTo(e[u+2][0],e[u+2][1]),this.drawingContext.lineTo(h[0],h[1]),this.drawingContext.lineTo(e[u+1][0],e[u+1][1]),this.drawingContext.lineTo(e[u+3][0],e[u+3][1]),this._doFill&&this._pInst.fill(e[u+3][5]),this._doStroke&&this._pInst.stroke(e[u+3][6])):(this.drawingContext.moveTo(h[0],h[1]),this.drawingContext.lineTo(e[u+1][0],e[u+1][1])),this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0][0],e[0][1]),u=1;p>u;u++)h=e[u],h.isVert&&(h.moveTo?this.drawingContext.moveTo(h[0],h[1]):this.drawingContext.lineTo(h[0],h[1]));this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),u=0;p>u;u++)e[u].isVert?e[u].moveTo?this.drawingContext.moveTo([0],e[u][1]):this.drawingContext.lineTo(e[u][0],e[u][1]):this.drawingContext.quadraticCurveTo(e[u][0],e[u][1],e[u][2],e[u][3]);this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),u=0;p>u;u++)e[u].isVert?e[u].moveTo?this.drawingContext.moveTo(e[u][0],e[u][1]):this.drawingContext.lineTo(e[u][0],e[u][1]):this.drawingContext.bezierCurveTo(e[u][0],e[u][1],e[u][2],e[u][3],e[u][4],e[u][5]);this._doFillStrokeClose()}else if(p>3){var c=[],f=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[1][0],e[1][1]),u=1;p>u+2;u++)h=e[u],c[0]=[h[0],h[1]],c[1]=[h[0]+(f*e[u+1][0]-f*e[u-1][0])/6,h[1]+(f*e[u+1][1]-f*e[u-1][1])/6],c[2]=[e[u+1][0]+(f*e[u][0]-f*e[u+2][0])/6,e[u+1][1]+(f*e[u][1]-f*e[u+2][1])/6],c[3]=[e[u+1][0],e[u+1][1]],this.drawingContext.bezierCurveTo(c[1][0],c[1][1],c[2][0],c[2][1],c[3][0],c[3][1]);l&&this.drawingContext.lineTo(e[u+1][0],e[u+1][1]),this._doFillStrokeClose()}return r=!1,i=!1,n=!1,s=!1,l&&e.pop(),this},i.Renderer2D.prototype.noSmooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!1:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!1:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!1:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!1),this},i.Renderer2D.prototype.smooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!0:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!0:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!0:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!0),this},i.Renderer2D.prototype.strokeCap=function(t){return(t===o.ROUND||t===o.SQUARE||t===o.PROJECT)&&(this.drawingContext.lineCap=t),this},i.Renderer2D.prototype.strokeJoin=function(t){return(t===o.ROUND||t===o.BEVEL||t===o.MITER)&&(this.drawingContext.lineJoin=t),this},i.Renderer2D.prototype.strokeWeight=function(t){return"undefined"==typeof t||0===t?this.drawingContext.lineWidth=1e-4:this.drawingContext.lineWidth=t,this},i.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle},i.Renderer2D.prototype._setFill=function(t){t!==this._cachedFillStyle&&(this.drawingContext.fillStyle=t,this._cachedFillStyle=t)},i.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle},i.Renderer2D.prototype._setStroke=function(t){t!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=t,this._cachedStrokeStyle=t)},i.Renderer2D.prototype.bezier=function(t,e,r,i,n,o,s,a){return this._pInst.beginShape(),this._pInst.vertex(t,e),this._pInst.bezierVertex(r,i,n,o,s,a),this._pInst.endShape(),this},i.Renderer2D.prototype.curve=function(t,e,r,i,n,o,s,a){return this._pInst.beginShape(),this._pInst.curveVertex(t,e),this._pInst.curveVertex(r,i),this._pInst.curveVertex(n,o),this._pInst.curveVertex(s,a),this._pInst.endShape(),this},i.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this.drawingContext.closePath()},i.Renderer2D.prototype.applyMatrix=function(t,e,r,i,n,o){this.drawingContext.transform(t,e,r,i,n,o)},i.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},i.Renderer2D.prototype.rotate=function(t){this.drawingContext.rotate(t)},i.Renderer2D.prototype.scale=function(t,e){return this.drawingContext.scale(t,e),this},i.Renderer2D.prototype.shearX=function(t){return this._pInst._angleMode===o.DEGREES&&(t=this._pInst.degrees(t)),this.drawingContext.transform(1,0,this._pInst.tan(t),1,0,0),this},i.Renderer2D.prototype.shearY=function(t){return this._pInst._angleMode===o.DEGREES&&(t=this._pInst.degrees(t)),this.drawingContext.transform(1,this._pInst.tan(t),0,1,0,0),this},i.Renderer2D.prototype.translate=function(t,e){return this.drawingContext.translate(t,e),this},i.Renderer2D.prototype.text=function(t,e,r,i,n){var s,a,h,l,u,d,p,c,f,m,g=this._pInst,_=Number.MAX_VALUE;if(this._doFill||this._doStroke){if("string"!=typeof t&&(t=t.toString()),t=t.replace(/(\t)/g,"  "),s=t.split("\n"),"undefined"!=typeof i){for(f=0,h=0;h<s.length;h++)for(u="",c=s[h].split(" "),a=0;a<c.length;a++)d=u+c[a]+" ",p=this.textWidth(d),p>i?(u=c[a]+" ",f+=g.textLeading()):u=d;switch(this._rectMode===o.CENTER&&(e-=i/2,r-=n/2),this.drawingContext.textAlign){case o.CENTER:e+=i/2;break;case o.RIGHT:e+=i}if("undefined"!=typeof n){switch(this.drawingContext.textBaseline){case o.BOTTOM:r+=n-f;break;case o._CTX_MIDDLE:r+=(n-f)/2;break;case o.BASELINE:m=!0,this.drawingContext.textBaseline=o.TOP}_=r+n-g.textAscent()}for(h=0;h<s.length;h++){for(u="",c=s[h].split(" "),a=0;a<c.length;a++)d=u+c[a]+" ",p=this.textWidth(d),p>i&&u.length>0?(this._renderText(g,u,e,r,_),u=c[a]+" ",r+=g.textLeading()):u=d;this._renderText(g,u,e,r,_),r+=g.textLeading()}}else{var y=0,v=g.textAlign().vertical;for(v===o.CENTER?y=(s.length-1)*g.textLeading()/2:v===o.BOTTOM&&(y=(s.length-1)*g.textLeading()),l=0;l<s.length;l++)this._renderText(g,s[l],e,r-y,_),r+=g.textLeading()}return m&&(this.drawingContext.textBaseline=o.BASELINE),g}},i.Renderer2D.prototype._renderText=function(t,e,r,i,n){return i>=n?void 0:(t.push(),this._isOpenType()?this._textFont._renderPath(e,r,i,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(e,r,i),this._doFill&&(this._fillSet||this._setFill(o._DEFAULT_TEXT_FILL),this.drawingContext.fillText(e,r,i))),t.pop(),t)},i.Renderer2D.prototype.textWidth=function(t){return this._isOpenType()?this._textFont._textWidth(t,this._textSize):this.drawingContext.measureText(t).width},i.Renderer2D.prototype.textAlign=function(t,e){if(arguments.length)return(t===o.LEFT||t===o.RIGHT||t===o.CENTER)&&(this.drawingContext.textAlign=t),(e===o.TOP||e===o.BOTTOM||e===o.CENTER||e===o.BASELINE)&&(e===o.CENTER?this.drawingContext.textBaseline=o._CTX_MIDDLE:this.drawingContext.textBaseline=e),this._pInst;var r=this.drawingContext.textBaseline;return r===o._CTX_MIDDLE&&(r=o.CENTER),{horizontal:this.drawingContext.textAlign,vertical:r}},i.Renderer2D.prototype._applyTextProperties=function(){var t,e=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),t=this._textFont,this._isOpenType()&&(t=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font=this._textStyle+" "+this._textSize+"px "+t,e},i.Renderer2D.prototype.push=function(){this.drawingContext.save()},i.Renderer2D.prototype.pop=function(){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle},e.exports=i.Renderer2D},{"../image/filters":23,"./canvas":7,"./constants":8,"./core":9,"./p5.Renderer":16}],18:[function(t,e,r){var i=t("./core"),n=t("./constants");t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var o="defaultCanvas0";i.prototype.createCanvas=function(t,e,r){var s,a,h=r||n.P2D;if(arguments[3]&&(s="boolean"==typeof arguments[3]?arguments[3]:!1),h===n.WEBGL)a=document.getElementById(o),a&&a.parentNode.removeChild(a),a=document.createElement("canvas"),a.id=o;else if(s){a=document.createElement("canvas");for(var l=0;document.getElementById("defaultCanvas"+l);)l++;o="defaultCanvas"+l,a.id=o}else a=this.canvas;return this._setupDone||(a.dataset.hidden=!0,a.style.visibility="hidden"),this._userNode?this._userNode.appendChild(a):document.body.appendChild(a),h===n.WEBGL?(this._setProperty("_renderer",new i.RendererGL(a,this,!0)),this._isdefaultGraphics=!0):this._isdefaultGraphics||(this._setProperty("_renderer",new i.Renderer2D(a,this,!0)),this._isdefaultGraphics=!0),this._renderer.resize(t,e),this._renderer._applyDefaults(),s&&this._elements.push(this._renderer),this._renderer},i.prototype.resizeCanvas=function(t,e,r){if(this._renderer){var i={};for(var n in this.drawingContext){var o=this.drawingContext[n];"object"!=typeof o&&"function"!=typeof o&&(i[n]=o)}this._renderer.resize(t,e);for(var s in i)this.drawingContext[s]=i[s];r||this.redraw()}},i.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},i.prototype.createGraphics=function(t,e,r){return new i.Graphics(t,e,r,this)},i.prototype.blendMode=function(t){if(t!==n.BLEND&&t!==n.DARKEST&&t!==n.LIGHTEST&&t!==n.DIFFERENCE&&t!==n.MULTIPLY&&t!==n.EXCLUSION&&t!==n.SCREEN&&t!==n.REPLACE&&t!==n.OVERLAY&&t!==n.HARD_LIGHT&&t!==n.SOFT_LIGHT&&t!==n.DODGE&&t!==n.BURN&&t!==n.ADD&&t!==n.NORMAL)throw new Error("Mode "+t+" not recognized.");this._renderer.blendMode(t)},e.exports=i},{"../webgl/p5.RendererGL":26,"./constants":8,"./core":9,"./p5.Graphics":15,"./p5.Renderer2D":17}],19:[function(t,e,r){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),window.performance=window.performance||{},window.performance.now=function(){var t=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-t}}(),function(){"use strict";"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1})}()},{}],20:[function(t,e,r){"use strict";var i=t("./core");i.prototype.exit=function(){throw"exit() not implemented, see remove()"},i.prototype.noLoop=function(){this._loop=!1},i.prototype.loop=function(){this._loop=!0,this._draw()},i.prototype.push=function(){this._renderer.push(),this._styles.push({_doStroke:this._renderer._doStroke,_strokeSet:this._renderer._strokeSet,_doFill:this._renderer._doFill,_fillSet:this._renderer._fillSet,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})},i.prototype.pop=function(){this._renderer.pop();var t=this._styles.pop();for(var e in t)this._renderer[e]=t[e]},i.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},i.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},i.prototype.redraw=function(){this.resetMatrix(),this._renderer.isP3D&&this._renderer._update();var t=1;if(1===arguments.length)try{parseInt(arguments[0])>1&&(t=parseInt(arguments[0]))}catch(e){}var r=this.setup||window.setup,i=this.draw||window.draw;if("function"==typeof i){"undefined"==typeof r&&this.scale(this._pixelDensity,this._pixelDensity);for(var n=this,o=function(t){t.call(n)},s=0;t>s;s++)this._registeredMethods.pre.forEach(o),i(),this._registeredMethods.post.forEach(o)}},i.prototype.size=function(){var t="size() is not a valid p5 function, to set the size of the ";throw t+="drawing canvas, please use createCanvas() instead"},e.exports=i},{"./core":9}],21:[function(t,e,r){"use strict";var i=t("./core"),n=t("./constants");i.prototype.applyMatrix=function(t,e,r,i,n,o){return this._renderer.applyMatrix(t,e,r,i,n,o),this},i.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},i.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented")},i.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},i.prototype.resetMatrix=function(){
return this._renderer.resetMatrix(),this},i.prototype.rotate=function(t,e){for(var r,i=new Array(arguments.length),o=0;o<i.length;++o)i[o]=arguments[o];return this._angleMode===n.DEGREES?r=this.radians(i[0]):this._angleMode===n.RADIANS&&(r=i[0]),i.length>1?this._renderer.rotate(r,i[1]):this._renderer.rotate(r),this},i.prototype.rotateX=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._renderer.rotateX(t),this},i.prototype.rotateY=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._renderer.rotateY(t),this},i.prototype.rotateZ=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._renderer.rotateZ(t),this},i.prototype.scale=function(){for(var t,e,r,n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return"undefined"!=typeof i.Vector?n[0]instanceof i.Vector&&(t=n[0].x,e=n[0].y,r=n[0].z):n[0]instanceof Array?(t=n[0][0],e=n[0][1],r=n[0][2]||1):1===n.length?t=e=r=n[0]:(t=n[0],e=n[1],r=n[2]||1),this._renderer.isP3D?this._renderer.scale.call(this._renderer,t,e,r):this._renderer.scale.call(this._renderer,t,e),this},i.prototype.shearX=function(t){return this._angleMode===n.DEGREES&&(t=this.radians(t)),this._renderer.shearX(t),this},i.prototype.shearY=function(t){return this._angleMode===n.DEGREES&&(t=this.radians(t)),this._renderer.shearY(t),this},i.prototype.translate=function(t,e,r){return this._renderer.isP3D?this._renderer.translate(t,e,r):this._renderer.translate(t,e),this},e.exports=i},{"./constants":8,"./core":9}],22:[function(t,e,r){"use strict";var i=t("./core"),n=t("./constants"),o=null,s=[],a=[],h=!1,l=!1,u=!1,d=!1,p=!0;i.prototype.beginContour=function(){return a=[],d=!0,this},i.prototype.beginShape=function(t){return o=t===n.POINTS||t===n.LINES||t===n.TRIANGLES||t===n.TRIANGLE_FAN||t===n.TRIANGLE_STRIP||t===n.QUADS||t===n.QUAD_STRIP?t:null,this._renderer.isP3D?this._renderer.beginShape(t):(s=[],a=[]),this},i.prototype.bezierVertex=function(t,e,r,i,n,o){if(0===s.length)throw"vertex() must be used once before calling bezierVertex()";h=!0;for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return l.isVert=!1,d?a.push(l):s.push(l),this},i.prototype.curveVertex=function(t,e){return l=!0,this.vertex(t,e),this},i.prototype.endContour=function(){var t=a[0].slice();t.isVert=a[0].isVert,t.moveTo=!1,a.push(t),p&&(s.push(s[0]),p=!1);for(var e=0;e<a.length;e++)s.push(a[e]);return this},i.prototype.endShape=function(t){if(this._renderer.isP3D)this._renderer.endShape(t,l,h,u,d,o);else{if(0===s.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var e=t===n.CLOSE;e&&!d&&s.push(s[0]),this._renderer.endShape(t,s,l,h,u,d,o),l=!1,h=!1,u=!1,d=!1,p=!0,e&&s.pop()}return this},i.prototype.quadraticVertex=function(t,e,r,i){if(this._contourInited){var o={};return o.x=t,o.y=e,o.x3=r,o.y3=i,o.type=n.QUADRATIC,this._contourVertices.push(o),this}if(!(s.length>0))throw"vertex() must be used once before calling quadraticVertex()";u=!0;for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];return h.isVert=!1,d?a.push(h):s.push(h),this},i.prototype.vertex=function(t,e,r){if(this._renderer.isP3D)this._renderer.vertex(t,e,r);else{var i=[];i.isVert=!0,i[0]=t,i[1]=e,i[2]=0,i[3]=0,i[4]=0,i[5]=this._renderer._getFill(),i[6]=this._renderer._getStroke(),r&&(i.moveTo=r),d?(0===a.length&&(i.moveTo=!0),a.push(i)):s.push(i)}return this},e.exports=i},{"./constants":8,"./core":9}],23:[function(t,e,r){"use strict";function i(t){var e=3.5*t|0;if(e=1>e?1:248>e?e:248,s!==e){s=e,a=1+s<<1,h=new Int32Array(a),l=new Array(a);for(var r=0;a>r;r++)l[r]=new Int32Array(256);for(var i,n,o,u,d=1,p=e-1;e>d;d++){h[e+d]=h[p]=n=p*p,o=l[e+d],u=l[p--];for(var c=0;256>c;c++)o[c]=u[c]=n*c}i=h[e]=e*e,o=l[e];for(var f=0;256>f;f++)o[f]=i*f}}function n(t,e){for(var r=o._toPixels(t),n=t.width,u=t.height,d=n*u,p=new Int32Array(d),c=0;d>c;c++)p[c]=o._getARGB(r,c);var f,m,g,_,y,v,x,w,C,b,E=new Int32Array(d),R=new Int32Array(d),M=new Int32Array(d),S=new Int32Array(d),T=0;i(e);var I,L,P,D;for(L=0;u>L;L++){for(I=0;n>I;I++){if(_=g=m=y=f=0,v=I-s,0>v)b=-v,v=0;else{if(v>=n)break;b=0}for(P=b;a>P&&!(v>=n);P++){var A=p[v+T];D=l[P],y+=D[(-16777216&A)>>>24],m+=D[(16711680&A)>>16],g+=D[(65280&A)>>8],_+=D[255&A],f+=h[P],v++}x=T+I,E[x]=y/f,R[x]=m/f,M[x]=g/f,S[x]=_/f}T+=n}for(T=0,w=-s,C=w*n,L=0;u>L;L++){for(I=0;n>I;I++){if(_=g=m=y=f=0,0>w)b=x=-w,v=I;else{if(w>=u)break;b=0,x=w,v=I+C}for(P=b;a>P&&!(x>=u);P++)D=l[P],y+=D[E[v]],m+=D[R[v]],g+=D[M[v]],_+=D[S[v]],f+=h[P],x++,v+=n;p[I+T]=y/f<<24|m/f<<16|g/f<<8|_/f}T+=n,C+=n,w++}o._setPixels(r,p)}var o={};o._toPixels=function(t){return t instanceof ImageData?t.data:t.getContext("2d").getImageData(0,0,t.width,t.height).data},o._getARGB=function(t,e){var r=4*e;return t[r+3]<<24&4278190080|t[r]<<16&16711680|t[r+1]<<8&65280|255&t[r+2]},o._setPixels=function(t,e){for(var r=0,i=0,n=t.length;n>i;i++)r=4*i,t[r+0]=(16711680&e[i])>>>16,t[r+1]=(65280&e[i])>>>8,t[r+2]=255&e[i],t[r+3]=(4278190080&e[i])>>>24},o._toImageData=function(t){return t instanceof ImageData?t:t.getContext("2d").getImageData(0,0,t.width,t.height)},o._createImageData=function(t,e){return o._tmpCanvas=document.createElement("canvas"),o._tmpCtx=o._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(t,e)},o.apply=function(t,e,r){var i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),o=e(n,r);o instanceof ImageData?i.putImageData(o,0,0,0,0,t.width,t.height):i.putImageData(n,0,0,0,0,t.width,t.height)},o.threshold=function(t,e){var r=o._toPixels(t);void 0===e&&(e=.5);for(var i=Math.floor(255*e),n=0;n<r.length;n+=4){var s,a=r[n],h=r[n+1],l=r[n+2],u=.2126*a+.7152*h+.0722*l;s=u>=i?255:0,r[n]=r[n+1]=r[n+2]=s}},o.gray=function(t){for(var e=o._toPixels(t),r=0;r<e.length;r+=4){var i=e[r],n=e[r+1],s=e[r+2],a=.2126*i+.7152*n+.0722*s;e[r]=e[r+1]=e[r+2]=a}},o.opaque=function(t){for(var e=o._toPixels(t),r=0;r<e.length;r+=4)e[r+3]=255;return e},o.invert=function(t){for(var e=o._toPixels(t),r=0;r<e.length;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]},o.posterize=function(t,e){var r=o._toPixels(t);if(2>e||e>255)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var i=e-1,n=0;n<r.length;n+=4){var s=r[n],a=r[n+1],h=r[n+2];r[n]=255*(s*e>>8)/i,r[n+1]=255*(a*e>>8)/i,r[n+2]=255*(h*e>>8)/i}},o.dilate=function(t){for(var e,r,i,n,s,a,h,l,u,d,p,c,f,m,g,_,y,v=o._toPixels(t),x=0,w=v.length?v.length/4:0,C=new Int32Array(w);w>x;)for(e=x,r=x+t.width;r>x;)i=n=o._getARGB(v,x),h=x-1,a=x+1,l=x-t.width,u=x+t.width,e>h&&(h=x),a>=r&&(a=x),0>l&&(l=0),u>=w&&(u=x),c=o._getARGB(v,l),p=o._getARGB(v,h),f=o._getARGB(v,u),d=o._getARGB(v,a),s=77*(i>>16&255)+151*(i>>8&255)+28*(255&i),g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),m=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),_=77*(c>>16&255)+151*(c>>8&255)+28*(255&c),y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),g>s&&(n=p,s=g),m>s&&(n=d,s=m),_>s&&(n=c,s=_),y>s&&(n=f,s=y),C[x++]=n;o._setPixels(v,C)},o.erode=function(t){for(var e,r,i,n,s,a,h,l,u,d,p,c,f,m,g,_,y,v=o._toPixels(t),x=0,w=v.length?v.length/4:0,C=new Int32Array(w);w>x;)for(e=x,r=x+t.width;r>x;)i=n=o._getARGB(v,x),h=x-1,a=x+1,l=x-t.width,u=x+t.width,e>h&&(h=x),a>=r&&(a=x),0>l&&(l=0),u>=w&&(u=x),c=o._getARGB(v,l),p=o._getARGB(v,h),f=o._getARGB(v,u),d=o._getARGB(v,a),s=77*(i>>16&255)+151*(i>>8&255)+28*(255&i),g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),m=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),_=77*(c>>16&255)+151*(c>>8&255)+28*(255&c),y=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),s>g&&(n=p,s=g),s>m&&(n=d,s=m),s>_&&(n=c,s=_),s>y&&(n=f,s=y),C[x++]=n;o._setPixels(v,C)};var s,a,h,l;o.blur=function(t,e){n(t,e)},e.exports=o},{}],24:[function(t,e,r){e.exports={degreesToRadians:function(t){return 2*Math.PI*t/360},radiansToDegrees:function(t){return 360*t/(2*Math.PI)}}},{}],25:[function(t,e,r){"use strict";var i=t("../core/core"),n=t("../math/polargeometry"),o=t("../core/constants"),s="undefined"!=typeof Float32Array?Float32Array:Array;i.Matrix=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return t[0]instanceof i?(this.p5=t[0],"mat3"===t[1]?this.mat3=t[2]||new s([1,0,0,0,1,0,0,0,1]):this.mat4=t[1]||new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):"mat3"===t[0]?this.mat3=t[1]||new s([1,0,0,0,1,0,0,0,1]):this.mat4=t[0]||new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},i.Matrix.prototype.set=function(t){return t instanceof i.Matrix?(this.mat4=t.mat4,this):t instanceof s?(this.mat4=t,this):this},i.Matrix.prototype.get=function(){return new i.Matrix(this.mat4)},i.Matrix.prototype.copy=function(){var t=new i.Matrix;return t.mat4[0]=this.mat4[0],t.mat4[1]=this.mat4[1],t.mat4[2]=this.mat4[2],t.mat4[3]=this.mat4[3],t.mat4[4]=this.mat4[4],t.mat4[5]=this.mat4[5],t.mat4[6]=this.mat4[6],t.mat4[7]=this.mat4[7],t.mat4[8]=this.mat4[8],t.mat4[9]=this.mat4[9],t.mat4[10]=this.mat4[10],t.mat4[11]=this.mat4[11],t.mat4[12]=this.mat4[12],t.mat4[13]=this.mat4[13],t.mat4[14]=this.mat4[14],t.mat4[15]=this.mat4[15],t},i.Matrix.identity=function(){return new i.Matrix},i.Matrix.prototype.transpose=function(t){var e,r,n,o,a,h;return t instanceof i.Matrix?(e=t.mat4[1],r=t.mat4[2],n=t.mat4[3],o=t.mat4[6],a=t.mat4[7],h=t.mat4[11],this.mat4[0]=t.mat4[0],this.mat4[1]=t.mat4[4],this.mat4[2]=t.mat4[8],this.mat4[3]=t.mat4[12],this.mat4[4]=e,this.mat4[5]=t.mat4[5],this.mat4[6]=t.mat4[9],this.mat4[7]=t.mat4[13],this.mat4[8]=r,this.mat4[9]=o,this.mat4[10]=t.mat4[10],this.mat4[11]=t.mat4[14],this.mat4[12]=n,this.mat4[13]=a,this.mat4[14]=h,this.mat4[15]=t.mat4[15]):t instanceof s&&(e=t[1],r=t[2],n=t[3],o=t[6],a=t[7],h=t[11],this.mat4[0]=t[0],this.mat4[1]=t[4],this.mat4[2]=t[8],this.mat4[3]=t[12],this.mat4[4]=e,this.mat4[5]=t[5],this.mat4[6]=t[9],this.mat4[7]=t[13],this.mat4[8]=r,this.mat4[9]=o,this.mat4[10]=t[10],this.mat4[11]=t[14],this.mat4[12]=n,this.mat4[13]=a,this.mat4[14]=h,this.mat4[15]=t[15]),this},i.Matrix.prototype.invert=function(t){var e,r,n,o,a,h,l,u,d,p,c,f,m,g,_,y;t instanceof i.Matrix?(e=t.mat4[0],r=t.mat4[1],n=t.mat4[2],o=t.mat4[3],a=t.mat4[4],h=t.mat4[5],l=t.mat4[6],u=t.mat4[7],d=t.mat4[8],p=t.mat4[9],c=t.mat4[10],f=t.mat4[11],m=t.mat4[12],g=t.mat4[13],_=t.mat4[14],y=t.mat4[15]):t instanceof s&&(e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],h=t[5],l=t[6],u=t[7],d=t[8],p=t[9],c=t[10],f=t[11],m=t[12],g=t[13],_=t[14],y=t[15]);var v=e*h-r*a,x=e*l-n*a,w=e*u-o*a,C=r*l-n*h,b=r*u-o*h,E=n*u-o*l,R=d*g-p*m,M=d*_-c*m,S=d*y-f*m,T=p*_-c*g,I=p*y-f*g,L=c*y-f*_,P=v*L-x*I+w*T+C*S-b*M+E*R;return P?(P=1/P,this.mat4[0]=(h*L-l*I+u*T)*P,this.mat4[1]=(n*I-r*L-o*T)*P,this.mat4[2]=(g*E-_*b+y*C)*P,this.mat4[3]=(c*b-p*E-f*C)*P,this.mat4[4]=(l*S-a*L-u*M)*P,this.mat4[5]=(e*L-n*S+o*M)*P,this.mat4[6]=(_*w-m*E-y*x)*P,this.mat4[7]=(d*E-c*w+f*x)*P,this.mat4[8]=(a*I-h*S+u*R)*P,this.mat4[9]=(r*S-e*I-o*R)*P,this.mat4[10]=(m*b-g*w+y*v)*P,this.mat4[11]=(p*w-d*b-f*v)*P,this.mat4[12]=(h*M-a*T-l*R)*P,this.mat4[13]=(e*T-r*M+n*R)*P,this.mat4[14]=(g*x-m*C-_*v)*P,this.mat4[15]=(d*C-p*x+c*v)*P,this):null},i.Matrix.prototype.invert3x3=function(){var t=this.mat3[0],e=this.mat3[1],r=this.mat3[2],i=this.mat3[3],n=this.mat3[4],o=this.mat3[5],s=this.mat3[6],a=this.mat3[7],h=this.mat3[8],l=h*n-o*a,u=-h*i+o*s,d=a*i-n*s,p=t*l+e*u+r*d;return p?(p=1/p,this.mat3[0]=l*p,this.mat3[1]=(-h*e+r*a)*p,this.mat3[2]=(o*e-r*n)*p,this.mat3[3]=u*p,this.mat3[4]=(h*t-r*s)*p,this.mat3[5]=(-o*t+r*i)*p,this.mat3[6]=d*p,this.mat3[7]=(-a*t+e*s)*p,this.mat3[8]=(n*t-e*i)*p,this):null},i.Matrix.prototype.transpose3x3=function(t){var e=t[1],r=t[2],i=t[5];return this.mat3[1]=t[3],this.mat3[2]=t[6],this.mat3[3]=e,this.mat3[5]=t[7],this.mat3[6]=r,this.mat3[7]=i,this},i.Matrix.prototype.inverseTranspose=function(t){return void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=t.mat4[0],this.mat3[1]=t.mat4[1],this.mat3[2]=t.mat4[2],this.mat3[3]=t.mat4[4],this.mat3[4]=t.mat4[5],this.mat3[5]=t.mat4[6],this.mat3[6]=t.mat4[8],this.mat3[7]=t.mat4[9],this.mat3[8]=t.mat4[10]),this.invert3x3().transpose3x3(this.mat3),this},i.Matrix.prototype.determinant=function(){var t=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],e=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],r=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],i=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],n=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],o=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],s=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],a=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],h=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],l=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],u=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],d=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return t*d-e*u+r*l+i*h-n*a+o*s},i.Matrix.prototype.mult=function(t){var e=new s(16),r=new s(16);t instanceof i.Matrix?r=t.mat4:t instanceof s&&(r=t);var n=this.mat4[0],o=this.mat4[1],a=this.mat4[2],h=this.mat4[3];return e[0]=n*r[0]+o*r[4]+a*r[8]+h*r[12],e[1]=n*r[1]+o*r[5]+a*r[9]+h*r[13],e[2]=n*r[2]+o*r[6]+a*r[10]+h*r[14],e[3]=n*r[3]+o*r[7]+a*r[11]+h*r[15],n=this.mat4[4],o=this.mat4[5],a=this.mat4[6],h=this.mat4[7],e[4]=n*r[0]+o*r[4]+a*r[8]+h*r[12],e[5]=n*r[1]+o*r[5]+a*r[9]+h*r[13],e[6]=n*r[2]+o*r[6]+a*r[10]+h*r[14],e[7]=n*r[3]+o*r[7]+a*r[11]+h*r[15],n=this.mat4[8],o=this.mat4[9],a=this.mat4[10],h=this.mat4[11],e[8]=n*r[0]+o*r[4]+a*r[8]+h*r[12],e[9]=n*r[1]+o*r[5]+a*r[9]+h*r[13],e[10]=n*r[2]+o*r[6]+a*r[10]+h*r[14],e[11]=n*r[3]+o*r[7]+a*r[11]+h*r[15],n=this.mat4[12],o=this.mat4[13],a=this.mat4[14],h=this.mat4[15],e[12]=n*r[0]+o*r[4]+a*r[8]+h*r[12],e[13]=n*r[1]+o*r[5]+a*r[9]+h*r[13],e[14]=n*r[2]+o*r[6]+a*r[10]+h*r[14],e[15]=n*r[3]+o*r[7]+a*r[11]+h*r[15],this.mat4=e,this},i.Matrix.prototype.scale=function(){for(var t,e,r,n=new Array(arguments.length),o=0;o<n.length;++o)n[o]=arguments[o];n[0]instanceof i.Vector?(t=n[0].x,e=n[0].y,r=n[0].z):n[0]instanceof Array&&(t=n[0][0],e=n[0][1],r=n[0][2]);var a=new s(16);return a[0]=this.mat4[0]*t,a[1]=this.mat4[1]*t,a[2]=this.mat4[2]*t,a[3]=this.mat4[3]*t,a[4]=this.mat4[4]*e,a[5]=this.mat4[5]*e,a[6]=this.mat4[6]*e,a[7]=this.mat4[7]*e,a[8]=this.mat4[8]*r,a[9]=this.mat4[9]*r,a[10]=this.mat4[10]*r,a[11]=this.mat4[11]*r,a[12]=this.mat4[12],a[13]=this.mat4[13],a[14]=this.mat4[14],a[15]=this.mat4[15],this.mat4=a,this},i.Matrix.prototype.rotate=function(t,e){var r,s,a,h,l;this.p5?this.p5._angleMode===o.DEGREES&&(h=n.degreesToRadians(t)):h=t,e instanceof i.Vector?(r=e.x,s=e.y,a=e.z):e instanceof Array&&(r=e[0],s=e[1],a=e[2]),l=Math.sqrt(r*r+s*s+a*a),r*=1/l,s*=1/l,a*=1/l;var u=this.mat4[0],d=this.mat4[1],p=this.mat4[2],c=this.mat4[3],f=this.mat4[4],m=this.mat4[5],g=this.mat4[6],_=this.mat4[7],y=this.mat4[8],v=this.mat4[9],x=this.mat4[10],w=this.mat4[11],C=Math.sin(h),b=Math.cos(h),E=1-b,R=r*r*E+b,M=s*r*E+a*C,S=a*r*E-s*C,T=r*s*E-a*C,I=s*s*E+b,L=a*s*E+r*C,P=r*a*E+s*C,D=s*a*E-r*C,A=a*a*E+b;return this.mat4[0]=u*R+f*M+y*S,this.mat4[1]=d*R+m*M+v*S,this.mat4[2]=p*R+g*M+x*S,this.mat4[3]=c*R+_*M+w*S,this.mat4[4]=u*T+f*I+y*L,this.mat4[5]=d*T+m*I+v*L,this.mat4[6]=p*T+g*I+x*L,this.mat4[7]=c*T+_*I+w*L,this.mat4[8]=u*P+f*D+y*A,this.mat4[9]=d*P+m*D+v*A,this.mat4[10]=p*P+g*D+x*A,this.mat4[11]=c*P+_*D+w*A,this},i.Matrix.prototype.translate=function(t){var e=t[0],r=t[1],i=t[2]||0;this.mat4[12]=this.mat4[0]*e+this.mat4[4]*r+this.mat4[8]*i+this.mat4[12],this.mat4[13]=this.mat4[1]*e+this.mat4[5]*r+this.mat4[9]*i+this.mat4[13],this.mat4[14]=this.mat4[2]*e+this.mat4[6]*r+this.mat4[10]*i+this.mat4[14],this.mat4[15]=this.mat4[3]*e+this.mat4[7]*r+this.mat4[11]*i+this.mat4[15]},i.Matrix.prototype.rotateX=function(t){this.rotate(t,[1,0,0])},i.Matrix.prototype.rotateY=function(t){this.rotate(t,[0,1,0])},i.Matrix.prototype.rotateZ=function(t){this.rotate(t,[0,0,1])},i.Matrix.prototype.perspective=function(t,e,r,i){var n=1/Math.tan(t/2),o=1/(r-i);return this.mat4[0]=n/e,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=n,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(i+r)*o,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*i*r*o,this.mat4[15]=0,this},i.Matrix.prototype.ortho=function(t,e,r,i,n,o){var s=1/(t-e),a=1/(r-i),h=1/(n-o);return this.mat4[0]=-2*s,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*a,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*h,this.mat4[11]=0,this.mat4[12]=(t+e)*s,this.mat4[13]=(i+r)*a,this.mat4[14]=(o+n)*h,this.mat4[15]=1,this},e.exports=i.Matrix},{"../core/constants":8,"../core/core":9,"../math/polargeometry":24}],26:[function(t,e,r){"use strict";var i=t("../core/core"),n=t("./shader");t("../core/p5.Renderer"),t("./p5.Matrix");var o=[],s={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};i.RendererGL=function(t,e,r){return i.Renderer.call(this,t,e,r),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0,this._curCamera=null,this.uMVMatrix=new i.Matrix,this.uPMatrix=new i.Matrix,this.uNMatrix=new i.Matrix("mat3"),this.gHash={},this.mHash={},this.isImmediateDrawing=!1,this.immediateMode={},this.curFillColor=[.5,.5,.5,1],this.curStrokeColor=[.5,.5,.5,1],this.pointSize=5,this},i.RendererGL.prototype=Object.create(i.Renderer.prototype),i.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",s)||this.canvas.getContext("experimental-webgl",s),null===this.drawingContext)throw new Error("Error creating webgl context");console.log("p5.RendererGL: enabled webgl context");var t=this.drawingContext;t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}catch(e){throw new Error(e)}},i.RendererGL.prototype._setDefaultCamera=function(){if(null===this._curCamera){var t=this.width,e=this.height;this.uPMatrix=i.Matrix.identity();var r=this.height/2/Math.tan(30*Math.PI/180);this.uPMatrix.perspective(60/180*Math.PI,t/e,.1*r,10*r),this._curCamera="default"}},i.RendererGL.prototype._update=function(){this.uMVMatrix=i.Matrix.identity(),this.translate(0,0,-(this.height/2)/Math.tan(30*Math.PI/180)),this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0},i.RendererGL.prototype.background=function(){var t=this.GL,e=this._pInst.color.apply(this._pInst,arguments),r=e.levels[0]/255,i=e.levels[1]/255,n=e.levels[2]/255,o=e.levels[3]/255;t.clearColor(r,i,n,o),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},i.RendererGL.prototype._initShaders=function(t,e,r){var i=this.GL,o=i.createShader(i.VERTEX_SHADER);if(i.shaderSource(o,n[t]),i.compileShader(o),!i.getShaderParameter(o,i.COMPILE_STATUS))return alert("Yikes! An error occurred compiling the shaders:"+i.getShaderInfoLog(o)),null;var s=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(s,n[e]),i.compileShader(s),!i.getShaderParameter(s,i.COMPILE_STATUS))return alert("Darn! An error occurred compiling the shaders:"+i.getShaderInfoLog(s)),null;var a=i.createProgram();return i.attachShader(a,o),i.attachShader(a,s),i.linkProgram(a),i.getProgramParameter(a,i.LINK_STATUS)||alert("Snap! Error linking shader program"),this._getLocation(a,r),a},i.RendererGL.prototype._getLocation=function(t,e){var r=this.GL;r.useProgram(t),t.uPMatrixUniform=r.getUniformLocation(t,"uProjectionMatrix"),t.uMVMatrixUniform=r.getUniformLocation(t,"uModelViewMatrix"),void 0===e&&(t.uNMatrixUniform=r.getUniformLocation(t,"uNormalMatrix"),t.samplerUniform=r.getUniformLocation(t,"uSampler"))},i.RendererGL.prototype._setUniform1f=function(t,e,r){var i=this.GL,n=this.mHash[t];return i.useProgram(n),n[e]=i.getUniformLocation(n,e),i.uniform1f(n[e],r),this},i.RendererGL.prototype._setMatrixUniforms=function(t){var e=this.GL,r=this.mHash[t];e.useProgram(r),e.uniformMatrix4fv(r.uPMatrixUniform,!1,this.uPMatrix.mat4),e.uniformMatrix4fv(r.uMVMatrixUniform,!1,this.uMVMatrix.mat4),this.uNMatrix.inverseTranspose(this.uMVMatrix),e.uniformMatrix3fv(r.uNMatrixUniform,!1,this.uNMatrix.mat3)},i.RendererGL.prototype._getShader=function(t,e,r){var i=t+"|"+e;if(!this.materialInHash(i)){var n=this._initShaders(t,e,r);this.mHash[i]=n}return this.curShaderId=i,this.mHash[this.curShaderId]},i.RendererGL.prototype._getCurShaderId=function(){if("fill"!==this.drawMode&&void 0===this.curShaderId){var t="normalVert|normalFrag",e=this._initShaders("normalVert","normalFrag");this.mHash[t]=e,this.curShaderId=t}else this.isImmediateDrawing&&"fill"===this.drawMode&&this._getShader("immediateVert","vertexColorFrag",!0);return this.curShaderId},i.RendererGL.prototype.fill=function(t,e,r,i){var n,o=this.GL,s=this._applyColorBlend.apply(this,arguments);return this.curFillColor=s,this.drawMode="fill",this.isImmediateDrawing?(n=this._getShader("immediateVert","vertexColorFrag"),o.useProgram(n)):(n=this._getShader("normalVert","basicFrag"),o.useProgram(n),n.uMaterialColor=o.getUniformLocation(n,"uMaterialColor"),o.uniform4f(n.uMaterialColor,s[0],s[1],s[2],s[3])),this},i.RendererGL.prototype.stroke=function(t,e,r,i){var n=this._pInst.color.apply(this._pInst,arguments),o=n._array;return this.curStrokeColor=o,this.drawMode="stroke",this},i.RendererGL.prototype._strokeCheck=function(){if("stroke"===this.drawMode)throw new Error("stroke for shapes in 3D not yet implemented, use fill for now :(")},i.RendererGL.prototype.strokeWeight=function(t){return this.pointSize=t,this},i.RendererGL.prototype.geometryInHash=function(t){return void 0!==this.gHash[t]},i.RendererGL.prototype.materialInHash=function(t){return void 0!==this.mHash[t]},i.RendererGL.prototype.resize=function(t,e){var r=this.GL;i.Renderer.prototype.resize.call(this,t,e),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),"default"===this._curCamera&&(this._curCamera=null,this._setDefaultCamera())},i.RendererGL.prototype.clear=function(){var t=this.GL;t.clearColor(arguments[0],arguments[1],arguments[2],arguments[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},i.RendererGL.prototype.translate=function(t,e,r){return this.uMVMatrix.translate([t,-e,r]),this},i.RendererGL.prototype.scale=function(t,e,r){return this.uMVMatrix.scale([t,e,r]),this},i.RendererGL.prototype.rotate=function(t,e){return this.uMVMatrix.rotate(t,e),this},i.RendererGL.prototype.rotateX=function(t){return this.rotate(t,[1,0,0]),this},i.RendererGL.prototype.rotateY=function(t){return this.rotate(t,[0,1,0]),this},i.RendererGL.prototype.rotateZ=function(t){return this.rotate(t,[0,0,1]),this},i.RendererGL.prototype.push=function(){o.push(this.uMVMatrix.copy())},i.RendererGL.prototype.pop=function(){if(0===o.length)throw new Error("Invalid popMatrix!");this.uMVMatrix=o.pop()},i.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=i.Matrix.identity(),this.translate(0,0,-800),this},i.RendererGL.prototype._applyTextProperties=function(){console.error("text commands not yet implemented in webgl")},e.exports=i.RendererGL},{"../core/core":9,"../core/p5.Renderer":16,"./p5.Matrix":25,"./shader":27}],27:[function(t,e,r){e.exports={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nuniform vec3 uAmbientColor[8];\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nvarying vec3 vVertexNormal;\nvarying vec2 vVertTexCoord;\nvarying vec3 vLightWeighting;\n\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\n\nvoid main(void){\n\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\n  vec3 vertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertexNormal = vertexNormal;\n  vVertTexCoord = aTexCoord;\n\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\n\n  float shininess = 32.0;\n  float specularFactor = 2.0;\n  float diffuseFactor = 0.3;\n\n  for(int i = 0; i < 8; i++){\n    if(uAmbientLightCount == i) break;\n    ambientLightFactor += uAmbientColor[i];\n  }\n\n  for(int j = 0; j < 8; j++){\n    if(uDirectionalLightCount == j) break;\n    vec3 dir = uLightingDirection[j];\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\n  }\n\n  for(int k = 0; k < 8; k++){\n    if(uPointLightCount == k) break;\n    vec3 loc = uPointLightLocation[k];\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\n\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\n\n    //factor2 for specular\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\n      +  directionalLightWeighting * diffuseFactor);\n  }\n\n  if(!uSpecular){\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\n  }else{\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\n  }\n\n}\n",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vLightWeighting;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  if(!isTexture){\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\n  }else{\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\n    if(vLightWeighting == vec3(0., 0., 0.)){\n      gl_FragColor = textureColor;\n    }else{\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a);\n    }\n  }\n}"}},{}]},{},[9,3,14,15,17,2,4,8,11,18,5,6,10,22,20,21,13])(22)});