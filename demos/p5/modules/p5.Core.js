/*! p5.p5.Core.js v0.5.11 July 21, 2017 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.p5=t()}}(function(){return function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[s]={exports:{}};e[s][0].call(d.exports,function(t){var i=e[s][1][t];return n(i?i:t)},d,d.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){"use strict";var r=t("./core"),n=t("./constants"),o=t("./canvas");t("./error_helpers"),r.prototype.arc=function(t,e,i,r,o,s,a){for(var h=new Array(arguments.length),l=0;l<h.length;++l)h[l]=arguments[l];if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(this._angleMode===n.DEGREES&&(o=this.radians(o),s=this.radians(s));0>o;)o+=n.TWO_PI;for(;0>s;)s+=n.TWO_PI;return o%=n.TWO_PI,s%=n.TWO_PI,s===o&&(s+=n.TWO_PI),o=o<=n.HALF_PI?Math.atan(i/r*Math.tan(o)):o>n.HALF_PI&&o<=3*n.HALF_PI?Math.atan(i/r*Math.tan(o))+n.PI:Math.atan(i/r*Math.tan(o))+n.TWO_PI,s=s<=n.HALF_PI?Math.atan(i/r*Math.tan(s)):s>n.HALF_PI&&s<=3*n.HALF_PI?Math.atan(i/r*Math.tan(s))+n.PI:Math.atan(i/r*Math.tan(s))+n.TWO_PI,o>s&&(s+=n.TWO_PI),i=Math.abs(i),r=Math.abs(r),this._renderer.arc(t,e,i,r,o,s,a),this},r.prototype.ellipse=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];if(3===t.length&&t.push(t[2]),t[2]<0&&(t[2]=Math.abs(t[2])),t[3]<0&&(t[3]=Math.abs(t[3])),!this._renderer._doStroke&&!this._renderer._doFill)return this;var i=o.modeAdjust(t[0],t[1],t[2],t[3],this._renderer._ellipseMode);return t[0]=i.x,t[1]=i.y,t[2]=i.w,t[3]=i.h,this._renderer.ellipse(t),this},r.prototype.line=function(){if(!this._renderer._doStroke)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.line(t[0],t[1],t[2],t[3],t[4],t[5]):this._renderer.line(t[0],t[1],t[2],t[3]),this},r.prototype.point=function(){if(!this._renderer._doStroke)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.point(t[0],t[1],t[2]):this._renderer.point(t[0],t[1]),this},r.prototype.quad=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.isP3D?this._renderer.quad(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]):this._renderer.quad(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),this},r.prototype.rect=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var i=o.modeAdjust(t[0],t[1],t[2],t[3],this._renderer._rectMode);return t[0]=i.x,t[1]=i.y,t[2]=i.w,t[3]=i.h,this._renderer.rect(t),this},r.prototype.triangle=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer.triangle(t),this},e.exports=r},{"./canvas":3,"./constants":4,"./core":5,"./error_helpers":8}],2:[function(t,e,i){"use strict";var r=t("./core"),n=t("./constants");r.prototype.ellipseMode=function(t){return(t===n.CORNER||t===n.CORNERS||t===n.RADIUS||t===n.CENTER)&&(this._renderer._ellipseMode=t),this},r.prototype.noSmooth=function(){return this._renderer.noSmooth(),this},r.prototype.rectMode=function(t){return(t===n.CORNER||t===n.CORNERS||t===n.RADIUS||t===n.CENTER)&&(this._renderer._rectMode=t),this},r.prototype.smooth=function(){return this._renderer.smooth(),this},r.prototype.strokeCap=function(t){return(t===n.ROUND||t===n.SQUARE||t===n.PROJECT)&&this._renderer.strokeCap(t),this},r.prototype.strokeJoin=function(t){return(t===n.ROUND||t===n.BEVEL||t===n.MITER)&&this._renderer.strokeJoin(t),this},r.prototype.strokeWeight=function(t){return this._renderer.strokeWeight(t),this},e.exports=r},{"./constants":4,"./core":5}],3:[function(t,e,i){var r=t("./constants");e.exports={modeAdjust:function(t,e,i,n,o){return o===r.CORNER?{x:t,y:e,w:i,h:n}:o===r.CORNERS?{x:t,y:e,w:i-t,h:n-e}:o===r.RADIUS?{x:t-i,y:e-n,w:2*i,h:2*n}:o===r.CENTER?{x:t-.5*i,y:e-.5*n,w:i,h:n}:void 0},arcModeAdjust:function(t,e,i,n,o){return o===r.CORNER?{x:t+.5*i,y:e+.5*n,w:i,h:n}:o===r.CORNERS?{x:t,y:e,w:i+t,h:n+e}:o===r.RADIUS?{x:t,y:e,w:2*i,h:2*n}:o===r.CENTER?{x:t,y:e,w:i,h:n}:void 0}}},{"./constants":4}],4:[function(t,e,i){var r=Math.PI;e.exports={P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:r/2,PI:r,QUARTER_PI:r/4,TAU:2*r,TWO_PI:2*r,DEGREES:"degrees",RADIANS:"radians",DEG_TO_RAD:r/180,RAD_TO_DEG:180/r,CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:0,LINES:1,LINE_STRIP:3,LINE_LOOP:2,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",HSL:"hsl",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"source-over",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"copy",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",LANDSCAPE:"landscape",PORTRAIT:"portrait",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}},{}],5:[function(t,e,i){"use strict";t("./shim");var r=t("./constants"),n=function(t,e,i){2===arguments.length&&"boolean"==typeof e&&(i=e,e=void 0),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=e,this._curElement=null,this._elements=[],this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._styles=[],this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._events.wheel=null,this._loadingScreenId="p5_loading",window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){this._userNode&&"string"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode));var t=this.preload||window.preload;if(t){var e=document.getElementById(this._loadingScreenId);if(!e){e=document.createElement("div"),e.innerHTML="Loading...",e.style.position="absolute",e.id=this._loadingScreenId;var i=this._userNode||document.body;i.appendChild(e)}for(var r in this._preloadMethods){this._preloadMethods[r]=this._preloadMethods[r]||n;var o=this._preloadMethods[r];(o===n.prototype||o===n)&&(o=this._isGlobal?window:this),this._registeredPreloadMethods[r]=o[r],o[r]=this._wrapPreload(o,r)}t(),this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this),this._runIfPreloadsAreDone=function(){var t=this._isGlobal?window:this;if(0===t._preloadCount){var e=document.getElementById(t._loadingScreenId);e&&e.parentNode.removeChild(e),t._setup(),t._runFrames(),t._draw()}},this._decrementPreload=function(){var t=this._isGlobal?window:this;"function"==typeof t.preload&&(t._setProperty("_preloadCount",t._preloadCount-1),t._runIfPreloadsAreDone())},this._wrapPreload=function(t,e){return function(){this._incrementPreload();for(var i=new Array(arguments.length),r=0;r<i.length;++r)i[r]=arguments[r];return this._registeredPreloadMethods[e].apply(t,i)}.bind(this)},this._incrementPreload=function(){var t=this._isGlobal?window:this;t._setProperty("_preloadCount",t._preloadCount+1)},this._setup=function(){this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0);var t=this._isGlobal?window:this;if("function"==typeof t.preload)for(var e in this._preloadMethods)t[e]=this._preloadMethods[e][e],t[e]&&this&&(t[e]=t[e].bind(this));"function"==typeof t.setup&&t.setup();for(var i=document.getElementsByTagName("canvas"),r=0;r<i.length;r++){var n=i[r];"true"===n.dataset.hidden&&(n.style.visibility="",delete n.dataset.hidden)}this._setupDone=!0}.bind(this),this._draw=function(){var t=window.performance.now(),e=t-this._lastFrameTime,i=1e3/this._targetFrameRate,r=5;(!this._loop||e>=i-r)&&(this._setProperty("frameCount",this.frameCount+1),this.redraw(),this._frameRate=1e3/(t-this._lastFrameTime),this._lastFrameTime=t,"undefined"!=typeof this._updateMouseCoords&&this._updateMouseCoords()),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this),this._setProperty=function(t,e){this[t]=e,this._isGlobal&&(window[t]=e)}.bind(this),this.remove=function(){if(this._curElement){this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId);for(var t in this._events)window.removeEventListener(t,this._events[t]);for(var e=0;e<this._elements.length;e++){var i=this._elements[e];i.elt.parentNode&&i.elt.parentNode.removeChild(i.elt);for(var r in i._events)i.elt.removeEventListener(r,i._events[r])}var o=this;if(this._registeredMethods.remove.forEach(function(t){"undefined"!=typeof t&&t.call(o)}),this._isGlobal){for(var s in n.prototype)try{delete window[s]}catch(a){window[s]=void 0}for(var h in this)if(this.hasOwnProperty(h))try{delete window[h]}catch(a){window[h]=void 0}}}}.bind(this),this._registeredMethods.init.forEach(function(t){"undefined"!=typeof t&&t.call(this)},this);var r=this._createFriendlyGlobalFunctionBinder();if(t)t(this);else{this._isGlobal=!0,n.instance=this;for(var o in n.prototype)if("function"==typeof n.prototype[o]){var s=o.substring(2);this._events.hasOwnProperty(s)||(Math.hasOwnProperty(o)&&Math[o]===n.prototype[o]?r(o,n.prototype[o]):r(o,n.prototype[o].bind(this)))}else r(o,n.prototype[o]);for(var a in this)this.hasOwnProperty(a)&&r(a,this[a])}for(var h in this._events){var l=this["_on"+h];if(l){var d=l.bind(this);window.addEventListener(h,d,{passive:!1}),this._events[h]=d}}var u=function(){this._setProperty("focused",!0)}.bind(this),p=function(){this._setProperty("focused",!1)}.bind(this);window.addEventListener("focus",u),window.addEventListener("blur",p),this.registerMethod("remove",function(){window.removeEventListener("focus",u),window.removeEventListener("blur",p)}),i?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};n.instance=null,n.disableFriendlyErrors=!1;for(var o in r)n.prototype[o]=r[o];n.prototype._preloadMethods={loadJSON:n.prototype,loadImage:n.prototype,loadStrings:n.prototype,loadXML:n.prototype,loadShape:n.prototype,loadTable:n.prototype,loadFont:n.prototype,loadModel:n.prototype},n.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},n.prototype._registeredPreloadMethods={},n.prototype.registerPreloadMethod=function(t,e){n.prototype._preloadMethods.hasOwnProperty(t)||(n.prototype._preloadMethods[t]=e)},n.prototype.registerMethod=function(t,e){n.prototype._registeredMethods.hasOwnProperty(t)||(n.prototype._registeredMethods[t]=[]),n.prototype._registeredMethods[t].push(e)},n.prototype._createFriendlyGlobalFunctionBinder=function(t){t=t||{};var e=t.globalObject||window,i=t.log||console.log.bind(console),r={print:!0};return function(t,o){if(n.disableFriendlyErrors||"undefined"!=typeof IS_MINIFIED||"function"!=typeof o||t in n.prototype._preloadMethods)e[t]=o;else try{if(t in e&&!(t in r))throw new Error('global "'+t+'" already exists');Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return o},set:function(r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}),i('You just changed the value of "'+t+"\", which was a p5 function. This could cause problems later if you're not careful.")}})}catch(s){i('p5 had problems creating the global function "'+t+'", possibly because your code is already using that name as a variable. You may want to rename your variable to something else.'),e[t]=o}}},e.exports=n},{"./constants":4,"./shim":15}],6:[function(t,e,i){"use strict";var r=t("./core");t("./error_helpers");var n=20,o=20;r.prototype.bezier=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer._doStroke||this._renderer._doFill?(this._renderer.isP3D?(t.push(n),this._renderer.bezier(t)):this._renderer.bezier(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),this):this},r.prototype.bezierDetail=function(t){return n=t,this},r.prototype.bezierPoint=function(t,e,i,r,n){var o=1-n;return Math.pow(o,3)*t+3*Math.pow(o,2)*n*e+3*o*Math.pow(n,2)*i+Math.pow(n,3)*r},r.prototype.bezierTangent=function(t,e,i,r,n){var o=1-n;return 3*r*Math.pow(n,2)-3*i*Math.pow(n,2)+6*i*o*n-6*e*o*n+3*e*Math.pow(o,2)-3*t*Math.pow(o,2)},r.prototype.curve=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return this._renderer._doStroke?(this._renderer.isP3D?(t.push(o),this._renderer.curve(t)):this._renderer.curve(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),this):this},r.prototype.curveDetail=function(t){return o=t,this},r.prototype.curveTightness=function(t){this._renderer._curveTightness=t},r.prototype.curvePoint=function(t,e,i,r,n){var o=n*n*n,s=n*n,a=-.5*o+s-.5*n,h=1.5*o-2.5*s+1,l=-1.5*o+2*s+.5*n,d=.5*o-.5*s;return t*a+e*h+i*l+r*d},r.prototype.curveTangent=function(t,e,i,r,n){var o=n*n,s=-3*o/2+2*n-.5,a=9*o/2-5*n,h=-9*o/2+4*n+.5,l=3*o/2-n;return t*s+e*a+i*h+r*l},e.exports=r},{"./core":5,"./error_helpers":8}],7:[function(t,e,i){"use strict";function r(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function n(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}function o(t){var e=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!e)throw new Error("Fullscreen not enabled in this browser.");t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}function s(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var a=t("./core"),h=t("./constants"),l=[h.ARROW,h.CROSS,h.HAND,h.MOVE,h.TEXT,h.WAIT];a.prototype._frameRate=0,a.prototype._lastFrameTime=window.performance.now(),a.prototype._targetFrameRate=60;var d=window.print;window.console&&console.log?a.prototype.print=function(t){try{if(0===arguments.length)d();else if(arguments.length>1)console.log.apply(console,arguments);else{var e=JSON.parse(JSON.stringify(t));"{}"===JSON.stringify(e)?console.log(t):console.log(e)}}catch(i){console.log(t)}}:a.prototype.print=function(){},a.prototype.frameCount=0,a.prototype.focused=document.hasFocus(),a.prototype.cursor=function(t,e,i){var r="auto",n=this._curElement.elt;if(l.indexOf(t)>-1)r=t;else if("string"==typeof t){var o="";e&&i&&"number"==typeof e&&"number"==typeof i&&(o=e+" "+i),r="http://"===t.substring(0,7)||"https://"===t.substring(0,8)?"url("+t+") "+o+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(t)?"url("+t+") "+o+", auto":t}n.style.cursor=r},a.prototype.frameRate=function(t){return"number"!=typeof t||0>t?this._frameRate:(this._setProperty("_targetFrameRate",t),this._runFrames(),this)},a.prototype.getFrameRate=function(){return this.frameRate()},a.prototype.setFrameRate=function(t){return this.frameRate(t)},a.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},a.prototype.displayWidth=screen.width,a.prototype.displayHeight=screen.height,a.prototype.windowWidth=r(),a.prototype.windowHeight=n(),a.prototype._onresize=function(t){this._setProperty("windowWidth",r()),this._setProperty("windowHeight",n());var e,i=this._isGlobal?window:this;"function"==typeof i.windowResized&&(e=i.windowResized(t),void 0===e||e||t.preventDefault())},a.prototype.width=0,a.prototype.height=0,a.prototype.fullscreen=function(t){return"undefined"==typeof t?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(t?o(document.documentElement):s())},a.prototype.pixelDensity=function(t){return"number"!=typeof t?this._pixelDensity:(this._pixelDensity=t,void this.resizeCanvas(this.width,this.height,!0))},a.prototype.displayDensity=function(){return window.devicePixelRatio},a.prototype.getURL=function(){return location.href},a.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(t){return""!==t})},a.prototype.getURLParams=function(){for(var t,e=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,i={};null!=(t=e.exec(location.search));)t.index===e.lastIndex&&e.lastIndex++,i[t[1]]=t[2];return i},e.exports=a},{"./constants":4,"./core":5}],8:[function(t,e,i){"use strict";function r(t,e,i){h&&(n(),h=!1),"undefined"===c(i)?i="#B40033":"number"===c(i)&&(i=f[i])}function n(){var t="transparent",e="#ED225D",i="#ED225D",r="white";console.log("%c    _ \n /\\| |/\\ \n \\ ` ' /  \n / , . \\  \n \\/|_|\\/ \n\n%c> p5.js says: Welcome! This is your friendly debugger. To turn me off switch to using \u201cp5.min.js\u201d.","background-color:"+t+";color:"+e+";","background-color:"+i+";color:"+r+";")}function o(){var e={},i=function(t){return Object.getOwnPropertyNames(t).filter(function(t){return"_"===t[0]?!1:t in e?!1:(e[t]=!0,!0)}).map(function(e){var i;return i="function"==typeof t[e]?"function":e===e.toUpperCase()?"constant":"variable",{name:e,type:i}})};_=[].concat(i(a.prototype),i(t("./constants"))),_.sort(function(t,e){return e.name.length-t.name.length})}function s(t,e){e||(e=console.log.bind(console)),_||o(),_.some(function(i){return t.message&&null!==t.message.match("\\W?"+i.name+"\\W")?(e("%cDid you just try to use p5.js's "+i.name+("function"===i.type?"() ":" ")+i.type+"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: "+y,"color: #B40033"),!0):void 0})}for(var a=t("./core"),h=!1,l={},d=l.toString,u=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],p=0;p<u.length;p++)l["[object "+u[p]+"]"]=u[p].toLowerCase();var c=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[d.call(t)]||"object":typeof t},m=3,f=["#2D7BB6","#EE9900","#4DB200","#C83C00"],g={0:{fileType:"image",method:"loadImage",message:" hosting the image online,"},1:{fileType:"XML file",method:"loadXML"},2:{fileType:"table file",method:"loadTable"},3:{fileType:"text file",method:"loadStrings"},4:{fileType:"font",method:"loadFont",message:" hosting the font online,"}};a._friendlyFileLoadError=function(t,e){var i=g[t],n="It looks like there was a problem loading your "+i.fileType+". Try checking if the file path%c ["+e+"] %cis correct,"+(i.message||"")+" or running a local server.";r(n,i.method,m)};var _=null,y="https://github.com/processing/p5.js/wiki/Frequently-Asked-Questions#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";a.prototype._helpForMisusedAtTopLevelCode=s,"complete"!==document.readyState&&(window.addEventListener("error",s,!1),window.addEventListener("load",function(){window.removeEventListener("error",s,!1)})),e.exports=a},{"./constants":4,"./core":5}],9:[function(t,e,i){var r=t("../core/core"),n=function(){window.PHANTOMJS||window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!r.instance&&new r};"complete"===document.readyState?n():window.addEventListener("load",n,!1)},{"../core/core":5}],10:[function(t,e,i){function r(t,e,i){var r=e.bind(i);i.elt.addEventListener(t,r,!1),i._events[t]=r}var n=t("./core");n.Element=function(t,e){this.elt=t,this._pInst=e,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},n.Element.prototype.parent=function(t){return 0===arguments.length?this.elt.parentNode:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof n.Element&&(t=t.elt),t.appendChild(this.elt),this)},n.Element.prototype.id=function(t){return 0===arguments.length?this.elt.id:(this.elt.id=t,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},n.Element.prototype["class"]=function(t){return 0===arguments.length?this.elt.className:(this.elt.className=t,this)},n.Element.prototype.mousePressed=function(t){return r("mousedown",t,this),r("touchstart",t,this),this},n.Element.prototype.doubleClicked=function(t){return r("doubleClicked",t,this),this},n.Element.prototype.mouseWheel=function(t){return r("wheel",t,this),this},n.Element.prototype.mouseReleased=function(t){return r("mouseup",t,this),r("touchend",t,this),this},n.Element.prototype.mouseClicked=function(t){return r("click",t,this),this},n.Element.prototype.mouseMoved=function(t){return r("mousemove",t,this),r("touchmove",t,this),this},n.Element.prototype.mouseOver=function(t){return r("mouseover",t,this),this},n.Element.prototype.changed=function(t){return r("change",t,this),this},n.Element.prototype.input=function(t){return r("input",t,this),this},n.Element.prototype.mouseOut=function(t){return r("mouseout",t,this),this},n.Element.prototype.touchStarted=function(t){return r("touchstart",t,this),r("mousedown",t,this),this},n.Element.prototype.touchMoved=function(t){return r("touchmove",t,this),r("mousemove",t,this),this},n.Element.prototype.touchEnded=function(t){return r("touchend",t,this),r("mouseup",t,this),this},n.Element.prototype.dragOver=function(t){return r("dragover",t,this),this},n.Element.prototype.dragLeave=function(t){return r("dragleave",t,this),this},n.Element.prototype.drop=function(t,e){function i(e){var i=new n.File(e);return function(e){i.data=e.target.result,t(i)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(r("dragover",function(t){t.stopPropagation(),t.preventDefault()},this),r("dragleave",function(t){t.stopPropagation(),t.preventDefault()},this),arguments.length>1&&r("drop",e,this),r("drop",function(t){t.stopPropagation(),t.preventDefault();for(var e=t.dataTransfer.files,r=0;r<e.length;r++){var n=e[r],o=new FileReader;o.onload=i(n),n.type.indexOf("text")>-1?o.readAsText(n):o.readAsDataURL(n)}},this)):console.log("The File APIs are not fully supported in this browser."),this},n.Element.prototype._setProperty=function(t,e){this[t]=e},e.exports=n.Element},{"./core":5}],11:[function(t,e,i){var r=t("./core"),n=t("./constants");r.Graphics=function(t,e,i,o){var s=i||n.P2D;this.canvas=document.createElement("canvas");var a=this._userNode||document.body;a.appendChild(this.canvas),r.Element.call(this,this.canvas,o,!1),this._styles=[],this.width=t,this.height=e,this._pixelDensity=o._pixelDensity,s===n.WEBGL?this._renderer=new r.RendererGL(this.canvas,this,!1):this._renderer=new r.Renderer2D(this.canvas,this,!1),this._renderer.resize(t,e),this._renderer._applyDefaults(),o._elements.push(this);for(var h in r.prototype)this[h]||("function"==typeof r.prototype[h]?this[h]=r.prototype[h].bind(this):this[h]=r.prototype[h]);return this},r.Graphics.prototype=Object.create(r.Element.prototype),r.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);for(var t in this._events)this.elt.removeEventListener(t,this._events[t])},e.exports=r.Graphics},{"./constants":4,"./core":5}],12:[function(t,e,i){function r(t){var e=0,i=0;if(t.offsetParent){do e+=t.offsetLeft,i+=t.offsetTop;while(t=t.offsetParent)}else e+=t.offsetLeft,i+=t.offsetTop;return[e,i]}var n=t("./core"),o=t("../core/constants");n.Renderer=function(t,e,i){n.Element.call(this,t,e),this.canvas=t,this._pInst=e,i?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=o.NORMAL,this._textAscent=null,this._textDescent=null,this._rectMode=o.CORNER,this._ellipseMode=o.CENTER,this._curveTightness=0,this._imageMode=o.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._colorMode=o.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}},n.Renderer.prototype=Object.create(n.Element.prototype),n.Renderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.elt.width=t*this._pInst._pixelDensity,this.elt.height=e*this._pInst._pixelDensity,this.elt.style.width=t+"px",this.elt.style.height=e+"px",this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},n.Renderer.prototype.textLeading=function(t){return arguments.length&&arguments[0]?(this._setProperty("_textLeading",t),this):this._textLeading},n.Renderer.prototype.textSize=function(t){return arguments.length&&arguments[0]?(this._setProperty("_textSize",t),this._setProperty("_textLeading",t*o._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},n.Renderer.prototype.textStyle=function(t){return arguments.length&&arguments[0]?((t===o.NORMAL||t===o.ITALIC||t===o.BOLD)&&this._setProperty("_textStyle",t),this._applyTextProperties()):this._textStyle},n.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},n.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},n.Renderer.prototype._applyDefaults=function(){return this},n.Renderer.prototype._isOpenType=function(t){return t=t||this._textFont,"object"==typeof t&&t.font&&t.font.supported},n.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var t=document.createElement("span");t.style.fontFamily=this._textFont,t.style.fontSize=this._textSize+"px",t.innerHTML="ABCjgq|";var e=document.createElement("div");e.style.display="inline-block",e.style.width="1px",e.style.height="0px";var i=document.createElement("div");i.appendChild(t),i.appendChild(e),i.style.height="0px",i.style.overflow="hidden",document.body.appendChild(i),e.style.verticalAlign="baseline";var n=r(e),o=r(t),s=n[1]-o[1];e.style.verticalAlign="bottom",n=r(e),o=r(t);var a=n[1]-o[1],h=a-s;return document.body.removeChild(i),this._setProperty("_textAscent",s),this._setProperty("_textDescent",h),this},e.exports=n.Renderer},{"../core/constants":4,"./core":5}],13:[function(t,e,i){var r=t("./core"),n=t("./canvas"),o=t("./constants"),s=t("../image/filters");t("./p5.Renderer");var a="rgba(0,0,0,0)";r.Renderer2D=function(t,e,i){return r.Renderer.call(this,t,e,i),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},r.Renderer2D.prototype=Object.create(r.Renderer.prototype),r.Renderer2D.prototype._applyDefaults=function(){this._setFill(o._DEFAULT_FILL),this._setStroke(o._DEFAULT_STROKE),this.drawingContext.lineCap=o.ROUND,this.drawingContext.font="normal 12px sans-serif"},r.Renderer2D.prototype.resize=function(t,e){r.Renderer.prototype.resize.call(this,t,e),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},r.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),arguments[0]instanceof r.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var t=this._getFill(),e=this._pInst.color.apply(this,arguments),i=e.toString();this._setFill(i),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(t)}this.drawingContext.restore()},r.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)},r.Renderer2D.prototype.fill=function(){var t=this._pInst.color.apply(this,arguments);this._setFill(t.toString())},r.Renderer2D.prototype.stroke=function(){var t=this._pInst.color.apply(this,arguments);this._setStroke(t.toString())},r.Renderer2D.prototype.image=function(t,e,i,n,o,s,a,h,l){var d;try{this._tint&&(r.MediaElement&&t instanceof r.MediaElement&&t.loadPixels(),t.canvas&&(d=this._getTintedImageCanvas(t))),d||(d=t.canvas||t.elt),this.drawingContext.drawImage(d,e,i,n,o,s,a,h,l)}catch(u){if("NS_ERROR_NOT_AVAILABLE"!==u.name)throw u}},r.Renderer2D.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var e=s._toPixels(t.canvas),i=document.createElement("canvas");i.width=t.canvas.width,i.height=t.canvas.height;for(var r=i.getContext("2d"),n=r.createImageData(t.canvas.width,t.canvas.height),o=n.data,a=0;a<e.length;a+=4){var h=e[a],l=e[a+1],d=e[a+2],u=e[a+3];o[a]=h*this._tint[0]/255,o[a+1]=l*this._tint[1]/255,o[a+2]=d*this._tint[2]/255,o[a+3]=u*this._tint[3]/255}return r.putImageData(n,0,0),i},r.Renderer2D.prototype.blendMode=function(t){this.drawingContext.globalCompositeOperation=t},r.Renderer2D.prototype.blend=function(){var t=this.drawingContext.globalCompositeOperation,e=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=e,this._pInst?this._pInst.copy.apply(this._pInst,i):this.copy.apply(this,i),this.drawingContext.globalCompositeOperation=t},r.Renderer2D.prototype.copy=function(){var t,e,i,n,o,s,a,h,l;if(9===arguments.length)t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],o=arguments[4],s=arguments[5],a=arguments[6],h=arguments[7],l=arguments[8];else{if(8!==arguments.length)throw new Error("Signature not supported");t=this._pInst,e=arguments[0],i=arguments[1],n=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5],h=arguments[6],l=arguments[7]}r.Renderer2D._copyHelper(t,e,i,n,o,s,a,h,l)},r.Renderer2D._copyHelper=function(t,e,i,r,n,o,s,a,h){t.loadPixels();var l=t.canvas.width/t.width;this.drawingContext.drawImage(t.canvas,l*e,l*i,l*r,l*n,o,s,a,h)},r.Renderer2D.prototype.get=function(t,e,i,n){if(void 0===t&&void 0===e&&void 0===i&&void 0===n?(t=0,e=0,i=this.width,n=this.height):void 0===i&&void 0===n&&(i=1,n=1),0>t+i||0>e+n||t>this.width||e>this.height)return[0,0,0,255];var o=this._pInst||this;o.loadPixels();var s=o._pixelDensity;t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),n=Math.floor(n);var a=t*s,h=e*s;if(1===i&&1===n){var l=this.drawingContext.getImageData(a,h,1,1).data;return[l[0],l[1],l[2],l[3]]}var d=Math.min(i,o.width),u=Math.min(n,o.height),p=d*s,c=u*s,m=new r.Image(d,u);return m.canvas.getContext("2d").drawImage(this.canvas,a,h,p,c,0,0,d,u),m},r.Renderer2D.prototype.loadPixels=function(){var t=this._pixelDensity||this._pInst._pixelDensity,e=this.width*t,i=this.height*t,r=this.drawingContext.getImageData(0,0,e,i);this._pInst?(this._pInst._setProperty("imageData",r),this._pInst._setProperty("pixels",r.data)):(this._setProperty("imageData",r),this._setProperty("pixels",r.data))},r.Renderer2D.prototype.set=function(t,e,i){if(t=Math.floor(t),e=Math.floor(e),i instanceof r.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this.drawingContext.drawImage(i.canvas,t,e),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var n=this._pInst||this,o=0,s=0,a=0,h=0,l=4*(e*n._pixelDensity*(this.width*n._pixelDensity)+t*n._pixelDensity);if(n.imageData||n.loadPixels.call(n),"number"==typeof i)l<n.pixels.length&&(o=i,s=i,a=i,h=255);else if(i instanceof Array){if(i.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");
l<n.pixels.length&&(o=i[0],s=i[1],a=i[2],h=i[3])}else i instanceof r.Color&&l<n.pixels.length&&(o=i.levels[0],s=i.levels[1],a=i.levels[2],h=i.levels[3]);for(var d=0;d<n._pixelDensity;d++)for(var u=0;u<n._pixelDensity;u++)l=4*((e*n._pixelDensity+u)*this.width*n._pixelDensity+(t*n._pixelDensity+d)),n.pixels[l]=o,n.pixels[l+1]=s,n.pixels[l+2]=a,n.pixels[l+3]=h}},r.Renderer2D.prototype.updatePixels=function(t,e,i,r){var n=this._pixelDensity||this._pInst._pixelDensity;void 0===t&&void 0===e&&void 0===i&&void 0===r&&(t=0,e=0,i=this.width,r=this.height),i*=n,r*=n,this._pInst?this.drawingContext.putImageData(this._pInst.imageData,t,e,0,0,i,r):this.drawingContext.putImageData(this.imageData,t,e,0,0,i,r)},r.Renderer2D.prototype._acuteArcToBezier=function(t,e){var i=e/2,r=Math.cos(i),n=Math.sin(i),o=1/Math.tan(i),s=t+i,a=Math.cos(s),h=Math.sin(s),l=(4-r)/3,d=n+(r-l)*o;return{ax:Math.cos(t),ay:Math.sin(t),bx:l*a+d*h,by:l*h-d*a,cx:l*a-d*h,cy:l*h+d*a,dx:Math.cos(t+e),dy:Math.sin(t+e)}},r.Renderer2D.prototype.arc=function(t,e,i,r,s,a,h){for(var l=this.drawingContext,d=n.arcModeAdjust(t,e,i,r,this._ellipseMode),u=d.w/2,p=d.h/2,c=1e-5,m=0,f=[];a-s>c;)m=Math.min(a-s,o.HALF_PI),f.push(this._acuteArcToBezier(s,m)),s+=m;return this._doFill&&(l.beginPath(),f.forEach(function(t,e){0===e&&l.moveTo(d.x+t.ax*u,d.y+t.ay*p),l.bezierCurveTo(d.x+t.bx*u,d.y+t.by*p,d.x+t.cx*u,d.y+t.cy*p,d.x+t.dx*u,d.y+t.dy*p)}),(h===o.PIE||null==h)&&l.lineTo(d.x,d.y),l.closePath(),l.fill()),this._doStroke&&(l.beginPath(),f.forEach(function(t,e){0===e&&l.moveTo(d.x+t.ax*u,d.y+t.ay*p),l.bezierCurveTo(d.x+t.bx*u,d.y+t.by*p,d.x+t.cx*u,d.y+t.cy*p,d.x+t.dx*u,d.y+t.dy*p)}),h===o.PIE?(l.lineTo(d.x,d.y),l.closePath()):h===o.CHORD&&l.closePath(),l.stroke()),this},r.Renderer2D.prototype.ellipse=function(t){var e=this.drawingContext,i=this._doFill,r=this._doStroke,n=t[0],o=t[1],s=t[2],h=t[3];if(i&&!r){if(this._getFill()===a)return this}else if(!i&&r&&this._getStroke()===a)return this;var l=.5522847498,d=s/2*l,u=h/2*l,p=n+s,c=o+h,m=n+s/2,f=o+h/2;e.beginPath(),e.moveTo(n,f),e.bezierCurveTo(n,f-u,m-d,o,m,o),e.bezierCurveTo(m+d,o,p,f-u,p,f),e.bezierCurveTo(p,f+u,m+d,c,m,c),e.bezierCurveTo(m-d,c,n,f+u,n,f),e.closePath(),i&&e.fill(),r&&e.stroke()},r.Renderer2D.prototype.line=function(t,e,i,r){var n=this.drawingContext;return this._doStroke?this._getStroke()===a?this:(n.lineWidth%2===1&&n.translate(.5,.5),n.beginPath(),n.moveTo(t,e),n.lineTo(i,r),n.stroke(),n.lineWidth%2===1&&n.translate(-.5,-.5),this):this},r.Renderer2D.prototype.point=function(t,e){var i=this.drawingContext;return this._doStroke?this._getStroke()===a?this:(t=Math.round(t),e=Math.round(e),void(i.lineWidth>1?(i.beginPath(),i.arc(t,e,i.lineWidth/2,0,o.TWO_PI,!1),i.fill()):i.fillRect(t,e,1,1))):this},r.Renderer2D.prototype.quad=function(t,e,i,r,n,o,s,h){var l=this.drawingContext,d=this._doFill,u=this._doStroke;if(d&&!u){if(this._getFill()===a)return this}else if(!d&&u&&this._getStroke()===a)return this;return l.beginPath(),l.moveTo(t,e),l.lineTo(i,r),l.lineTo(n,o),l.lineTo(s,h),l.closePath(),d&&l.fill(),u&&l.stroke(),this},r.Renderer2D.prototype.rect=function(t){var e=t[0],i=t[1],r=t[2],n=t[3],o=t[4],s=t[5],h=t[6],l=t[7],d=this.drawingContext,u=this._doFill,p=this._doStroke;if(u&&!p){if(this._getFill()===a)return this}else if(!u&&p&&this._getStroke()===a)return this;if(this._doStroke&&d.lineWidth%2===1&&d.translate(.5,.5),d.beginPath(),"undefined"==typeof o)d.rect(e,i,r,n);else{"undefined"==typeof s&&(s=o),"undefined"==typeof h&&(h=s),"undefined"==typeof l&&(l=h);var c=r/2,m=n/2;2*o>r&&(o=c),2*o>n&&(o=m),2*s>r&&(s=c),2*s>n&&(s=m),2*h>r&&(h=c),2*h>n&&(h=m),2*l>r&&(l=c),2*l>n&&(l=m),d.beginPath(),d.moveTo(e+o,i),d.arcTo(e+r,i,e+r,i+n,s),d.arcTo(e+r,i+n,e,i+n,h),d.arcTo(e,i+n,e,i,l),d.arcTo(e,i,e+r,i,o),d.closePath()}return this._doFill&&d.fill(),this._doStroke&&d.stroke(),this._doStroke&&d.lineWidth%2===1&&d.translate(-.5,-.5),this},r.Renderer2D.prototype.triangle=function(t){var e=this.drawingContext,i=this._doFill,r=this._doStroke,n=t[0],o=t[1],s=t[2],h=t[3],l=t[4],d=t[5];if(i&&!r){if(this._getFill()===a)return this}else if(!i&&r&&this._getStroke()===a)return this;e.beginPath(),e.moveTo(n,o),e.lineTo(s,h),e.lineTo(l,d),e.closePath(),i&&e.fill(),r&&e.stroke()},r.Renderer2D.prototype.endShape=function(t,e,i,r,n,s,a){if(0===e.length)return this;if(!this._doStroke&&!this._doFill)return this;var h,l=t===o.CLOSE;l&&!s&&e.push(e[0]);var d,u,p=e.length;if(!i||a!==o.POLYGON&&null!==a)if(!r||a!==o.POLYGON&&null!==a)if(!n||a!==o.POLYGON&&null!==a)if(a===o.POINTS)for(d=0;p>d;d++)h=e[d],this._doStroke&&this._pInst.stroke(h[6]),this._pInst.point(h[0],h[1]);else if(a===o.LINES)for(d=0;p>d+1;d+=2)h=e[d],this._doStroke&&this._pInst.stroke(e[d+1][6]),this._pInst.line(h[0],h[1],e[d+1][0],e[d+1][1]);else if(a===o.TRIANGLES)for(d=0;p>d+2;d+=3)h=e[d],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0],h[1]),this.drawingContext.lineTo(e[d+1][0],e[d+1][1]),this.drawingContext.lineTo(e[d+2][0],e[d+2][1]),this.drawingContext.lineTo(h[0],h[1]),this._doFill&&(this._pInst.fill(e[d+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(e[d+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(a===o.TRIANGLE_STRIP)for(d=0;p>d+1;d++)h=e[d],this.drawingContext.beginPath(),this.drawingContext.moveTo(e[d+1][0],e[d+1][1]),this.drawingContext.lineTo(h[0],h[1]),this._doStroke&&this._pInst.stroke(e[d+1][6]),this._doFill&&this._pInst.fill(e[d+1][5]),p>d+2&&(this.drawingContext.lineTo(e[d+2][0],e[d+2][1]),this._doStroke&&this._pInst.stroke(e[d+2][6]),this._doFill&&this._pInst.fill(e[d+2][5])),this._doFillStrokeClose();else if(a===o.TRIANGLE_FAN){if(p>2){for(this.drawingContext.beginPath(),d=2;p>d;d++)h=e[d],this.drawingContext.moveTo(e[0][0],e[0][1]),this.drawingContext.lineTo(e[d-1][0],e[d-1][1]),this.drawingContext.lineTo(h[0],h[1]),this.drawingContext.lineTo(e[0][0],e[0][1]),p-1>d&&(this._doFill&&h[5]!==e[d+1][5]||this._doStroke&&h[6]!==e[d+1][6])&&(this._doFill&&(this._pInst.fill(h[5]),this.drawingContext.fill(),this._pInst.fill(e[d+1][5])),this._doStroke&&(this._pInst.stroke(h[6]),this.drawingContext.stroke(),this._pInst.stroke(e[d+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose()}}else if(a===o.QUADS)for(d=0;p>d+3;d+=4){for(h=e[d],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0],h[1]),u=1;4>u;u++)this.drawingContext.lineTo(e[d+u][0],e[d+u][1]);this.drawingContext.lineTo(h[0],h[1]),this._doFill&&this._pInst.fill(e[d+3][5]),this._doStroke&&this._pInst.stroke(e[d+3][6]),this._doFillStrokeClose()}else if(a===o.QUAD_STRIP){if(p>3)for(d=0;p>d+1;d+=2)h=e[d],this.drawingContext.beginPath(),p>d+3?(this.drawingContext.moveTo(e[d+2][0],e[d+2][1]),this.drawingContext.lineTo(h[0],h[1]),this.drawingContext.lineTo(e[d+1][0],e[d+1][1]),this.drawingContext.lineTo(e[d+3][0],e[d+3][1]),this._doFill&&this._pInst.fill(e[d+3][5]),this._doStroke&&this._pInst.stroke(e[d+3][6])):(this.drawingContext.moveTo(h[0],h[1]),this.drawingContext.lineTo(e[d+1][0],e[d+1][1])),this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[0][0],e[0][1]),d=1;p>d;d++)h=e[d],h.isVert&&(h.moveTo?this.drawingContext.moveTo(h[0],h[1]):this.drawingContext.lineTo(h[0],h[1]));this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),d=0;p>d;d++)e[d].isVert?e[d].moveTo?this.drawingContext.moveTo([0],e[d][1]):this.drawingContext.lineTo(e[d][0],e[d][1]):this.drawingContext.quadraticCurveTo(e[d][0],e[d][1],e[d][2],e[d][3]);this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),d=0;p>d;d++)e[d].isVert?e[d].moveTo?this.drawingContext.moveTo(e[d][0],e[d][1]):this.drawingContext.lineTo(e[d][0],e[d][1]):this.drawingContext.bezierCurveTo(e[d][0],e[d][1],e[d][2],e[d][3],e[d][4],e[d][5]);this._doFillStrokeClose()}else if(p>3){var c=[],m=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(e[1][0],e[1][1]),d=1;p>d+2;d++)h=e[d],c[0]=[h[0],h[1]],c[1]=[h[0]+(m*e[d+1][0]-m*e[d-1][0])/6,h[1]+(m*e[d+1][1]-m*e[d-1][1])/6],c[2]=[e[d+1][0]+(m*e[d][0]-m*e[d+2][0])/6,e[d+1][1]+(m*e[d][1]-m*e[d+2][1])/6],c[3]=[e[d+1][0],e[d+1][1]],this.drawingContext.bezierCurveTo(c[1][0],c[1][1],c[2][0],c[2][1],c[3][0],c[3][1]);l&&this.drawingContext.lineTo(e[d+1][0],e[d+1][1]),this._doFillStrokeClose()}return i=!1,r=!1,n=!1,s=!1,l&&e.pop(),this},r.Renderer2D.prototype.noSmooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!1:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!1:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!1:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!1),this},r.Renderer2D.prototype.smooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!0:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!0:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!0:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!0),this},r.Renderer2D.prototype.strokeCap=function(t){return(t===o.ROUND||t===o.SQUARE||t===o.PROJECT)&&(this.drawingContext.lineCap=t),this},r.Renderer2D.prototype.strokeJoin=function(t){return(t===o.ROUND||t===o.BEVEL||t===o.MITER)&&(this.drawingContext.lineJoin=t),this},r.Renderer2D.prototype.strokeWeight=function(t){return"undefined"==typeof t||0===t?this.drawingContext.lineWidth=1e-4:this.drawingContext.lineWidth=t,this},r.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle},r.Renderer2D.prototype._setFill=function(t){t!==this._cachedFillStyle&&(this.drawingContext.fillStyle=t,this._cachedFillStyle=t)},r.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle},r.Renderer2D.prototype._setStroke=function(t){t!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=t,this._cachedStrokeStyle=t)},r.Renderer2D.prototype.bezier=function(t,e,i,r,n,o,s,a){return this._pInst.beginShape(),this._pInst.vertex(t,e),this._pInst.bezierVertex(i,r,n,o,s,a),this._pInst.endShape(),this},r.Renderer2D.prototype.curve=function(t,e,i,r,n,o,s,a){return this._pInst.beginShape(),this._pInst.curveVertex(t,e),this._pInst.curveVertex(i,r),this._pInst.curveVertex(n,o),this._pInst.curveVertex(s,a),this._pInst.endShape(),this},r.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this.drawingContext.closePath()},r.Renderer2D.prototype.applyMatrix=function(t,e,i,r,n,o){this.drawingContext.transform(t,e,i,r,n,o)},r.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},r.Renderer2D.prototype.rotate=function(t){this.drawingContext.rotate(t)},r.Renderer2D.prototype.scale=function(t,e){return this.drawingContext.scale(t,e),this},r.Renderer2D.prototype.shearX=function(t){return this._pInst._angleMode===o.DEGREES&&(t=this._pInst.degrees(t)),this.drawingContext.transform(1,0,this._pInst.tan(t),1,0,0),this},r.Renderer2D.prototype.shearY=function(t){return this._pInst._angleMode===o.DEGREES&&(t=this._pInst.degrees(t)),this.drawingContext.transform(1,this._pInst.tan(t),0,1,0,0),this},r.Renderer2D.prototype.translate=function(t,e){return this.drawingContext.translate(t,e),this},r.Renderer2D.prototype.text=function(t,e,i,r,n){var s,a,h,l,d,u,p,c,m,f,g=this._pInst,_=Number.MAX_VALUE;if(this._doFill||this._doStroke){if("string"!=typeof t&&(t=t.toString()),t=t.replace(/(\t)/g,"  "),s=t.split("\n"),"undefined"!=typeof r){for(m=0,h=0;h<s.length;h++)for(d="",c=s[h].split(" "),a=0;a<c.length;a++)u=d+c[a]+" ",p=this.textWidth(u),p>r?(d=c[a]+" ",m+=g.textLeading()):d=u;switch(this._rectMode===o.CENTER&&(e-=r/2,i-=n/2),this.drawingContext.textAlign){case o.CENTER:e+=r/2;break;case o.RIGHT:e+=r}if("undefined"!=typeof n){switch(this.drawingContext.textBaseline){case o.BOTTOM:i+=n-m;break;case o._CTX_MIDDLE:i+=(n-m)/2;break;case o.BASELINE:f=!0,this.drawingContext.textBaseline=o.TOP}_=i+n-g.textAscent()}for(h=0;h<s.length;h++){for(d="",c=s[h].split(" "),a=0;a<c.length;a++)u=d+c[a]+" ",p=this.textWidth(u),p>r&&d.length>0?(this._renderText(g,d,e,i,_),d=c[a]+" ",i+=g.textLeading()):d=u;this._renderText(g,d,e,i,_),i+=g.textLeading()}}else{var y=0,v=g.textAlign().vertical;for(v===o.CENTER?y=(s.length-1)*g.textLeading()/2:v===o.BOTTOM&&(y=(s.length-1)*g.textLeading()),l=0;l<s.length;l++)this._renderText(g,s[l],e,i-y,_),i+=g.textLeading()}return f&&(this.drawingContext.textBaseline=o.BASELINE),g}},r.Renderer2D.prototype._renderText=function(t,e,i,r,n){return r>=n?void 0:(t.push(),this._isOpenType()?this._textFont._renderPath(e,i,r,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(e,i,r),this._doFill&&(this._fillSet||this._setFill(o._DEFAULT_TEXT_FILL),this.drawingContext.fillText(e,i,r))),t.pop(),t)},r.Renderer2D.prototype.textWidth=function(t){return this._isOpenType()?this._textFont._textWidth(t,this._textSize):this.drawingContext.measureText(t).width},r.Renderer2D.prototype.textAlign=function(t,e){if(arguments.length)return(t===o.LEFT||t===o.RIGHT||t===o.CENTER)&&(this.drawingContext.textAlign=t),(e===o.TOP||e===o.BOTTOM||e===o.CENTER||e===o.BASELINE)&&(e===o.CENTER?this.drawingContext.textBaseline=o._CTX_MIDDLE:this.drawingContext.textBaseline=e),this._pInst;var i=this.drawingContext.textBaseline;return i===o._CTX_MIDDLE&&(i=o.CENTER),{horizontal:this.drawingContext.textAlign,vertical:i}},r.Renderer2D.prototype._applyTextProperties=function(){var t,e=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),t=this._textFont,this._isOpenType()&&(t=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font=this._textStyle+" "+this._textSize+"px "+t,e},r.Renderer2D.prototype.push=function(){this.drawingContext.save()},r.Renderer2D.prototype.pop=function(){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle},e.exports=r.Renderer2D},{"../image/filters":19,"./canvas":3,"./constants":4,"./core":5,"./p5.Renderer":12}],14:[function(t,e,i){var r=t("./core"),n=t("./constants");t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var o="defaultCanvas0";r.prototype.createCanvas=function(t,e,i){var s,a,h=i||n.P2D;if(arguments[3]&&(s="boolean"==typeof arguments[3]?arguments[3]:!1),h===n.WEBGL)a=document.getElementById(o),a&&a.parentNode.removeChild(a),a=document.createElement("canvas"),a.id=o;else if(s){a=document.createElement("canvas");for(var l=0;document.getElementById("defaultCanvas"+l);)l++;o="defaultCanvas"+l,a.id=o}else a=this.canvas;return this._setupDone||(a.dataset.hidden=!0,a.style.visibility="hidden"),this._userNode?this._userNode.appendChild(a):document.body.appendChild(a),h===n.WEBGL?(this._setProperty("_renderer",new r.RendererGL(a,this,!0)),this._isdefaultGraphics=!0):this._isdefaultGraphics||(this._setProperty("_renderer",new r.Renderer2D(a,this,!0)),this._isdefaultGraphics=!0),this._renderer.resize(t,e),this._renderer._applyDefaults(),s&&this._elements.push(this._renderer),this._renderer},r.prototype.resizeCanvas=function(t,e,i){if(this._renderer){var r={};for(var n in this.drawingContext){var o=this.drawingContext[n];"object"!=typeof o&&"function"!=typeof o&&(r[n]=o)}this._renderer.resize(t,e);for(var s in r)this.drawingContext[s]=r[s];i||this.redraw()}},r.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},r.prototype.createGraphics=function(t,e,i){return new r.Graphics(t,e,i,this)},r.prototype.blendMode=function(t){if(t!==n.BLEND&&t!==n.DARKEST&&t!==n.LIGHTEST&&t!==n.DIFFERENCE&&t!==n.MULTIPLY&&t!==n.EXCLUSION&&t!==n.SCREEN&&t!==n.REPLACE&&t!==n.OVERLAY&&t!==n.HARD_LIGHT&&t!==n.SOFT_LIGHT&&t!==n.DODGE&&t!==n.BURN&&t!==n.ADD&&t!==n.NORMAL)throw new Error("Mode "+t+" not recognized.");this._renderer.blendMode(t)},e.exports=r},{"../webgl/p5.RendererGL":22,"./constants":4,"./core":5,"./p5.Graphics":11,"./p5.Renderer2D":13}],15:[function(t,e,i){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),window.performance=window.performance||{},window.performance.now=function(){var t=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-t}}(),function(){"use strict";"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1})}()},{}],16:[function(t,e,i){"use strict";var r=t("./core");r.prototype.exit=function(){throw"exit() not implemented, see remove()"},r.prototype.noLoop=function(){this._loop=!1},r.prototype.loop=function(){this._loop=!0,this._draw()},r.prototype.push=function(){this._renderer.push(),this._styles.push({_doStroke:this._renderer._doStroke,_strokeSet:this._renderer._strokeSet,_doFill:this._renderer._doFill,_fillSet:this._renderer._fillSet,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})},r.prototype.pop=function(){this._renderer.pop();var t=this._styles.pop();for(var e in t)this._renderer[e]=t[e]},r.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.prototype.redraw=function(){this.resetMatrix(),this._renderer.isP3D&&this._renderer._update();var t=1;if(1===arguments.length)try{parseInt(arguments[0])>1&&(t=parseInt(arguments[0]))}catch(e){}var i=this.setup||window.setup,r=this.draw||window.draw;if("function"==typeof r){"undefined"==typeof i&&this.scale(this._pixelDensity,this._pixelDensity);for(var n=this,o=function(t){t.call(n)},s=0;t>s;s++)this._registeredMethods.pre.forEach(o),r(),this._registeredMethods.post.forEach(o)}},r.prototype.size=function(){var t="size() is not a valid p5 function, to set the size of the ";throw t+="drawing canvas, please use createCanvas() instead"},e.exports=r},{"./core":5}],17:[function(t,e,i){"use strict";var r=t("./core"),n=t("./constants");r.prototype.applyMatrix=function(t,e,i,r,n,o){return this._renderer.applyMatrix(t,e,i,r,n,o),this},r.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented")},r.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},r.prototype.rotate=function(t,e){for(var i,r=new Array(arguments.length),o=0;o<r.length;++o)r[o]=arguments[o];return this._angleMode===n.DEGREES?i=this.radians(r[0]):this._angleMode===n.RADIANS&&(i=r[0]),r.length>1?this._renderer.rotate(i,r[1]):this._renderer.rotate(i),this},r.prototype.rotateX=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._renderer.rotateX(t),this},r.prototype.rotateY=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._renderer.rotateY(t),this},r.prototype.rotateZ=function(t){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._renderer.rotateZ(t),this},r.prototype.scale=function(){for(var t,e,i,n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return"undefined"!=typeof r.Vector?n[0]instanceof r.Vector&&(t=n[0].x,e=n[0].y,i=n[0].z):n[0]instanceof Array?(t=n[0][0],e=n[0][1],i=n[0][2]||1):1===n.length?t=e=i=n[0]:(t=n[0],e=n[1],i=n[2]||1),this._renderer.isP3D?this._renderer.scale.call(this._renderer,t,e,i):this._renderer.scale.call(this._renderer,t,e),this},r.prototype.shearX=function(t){return this._angleMode===n.DEGREES&&(t=this.radians(t)),this._renderer.shearX(t),this},r.prototype.shearY=function(t){return this._angleMode===n.DEGREES&&(t=this.radians(t)),this._renderer.shearY(t),this},r.prototype.translate=function(t,e,i){return this._renderer.isP3D?this._renderer.translate(t,e,i):this._renderer.translate(t,e),this},e.exports=r},{"./constants":4,"./core":5}],18:[function(t,e,i){"use strict";var r=t("./core"),n=t("./constants"),o=null,s=[],a=[],h=!1,l=!1,d=!1,u=!1,p=!0;r.prototype.beginContour=function(){return a=[],u=!0,this},r.prototype.beginShape=function(t){return o=t===n.POINTS||t===n.LINES||t===n.TRIANGLES||t===n.TRIANGLE_FAN||t===n.TRIANGLE_STRIP||t===n.QUADS||t===n.QUAD_STRIP?t:null,this._renderer.isP3D?this._renderer.beginShape(t):(s=[],a=[]),this},r.prototype.bezierVertex=function(t,e,i,r,n,o){if(0===s.length)throw"vertex() must be used once before calling bezierVertex()";h=!0;for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return l.isVert=!1,u?a.push(l):s.push(l),this},r.prototype.curveVertex=function(t,e){return l=!0,this.vertex(t,e),this},r.prototype.endContour=function(){var t=a[0].slice();t.isVert=a[0].isVert,t.moveTo=!1,a.push(t),p&&(s.push(s[0]),p=!1);for(var e=0;e<a.length;e++)s.push(a[e]);return this},r.prototype.endShape=function(t){if(this._renderer.isP3D)this._renderer.endShape(t,l,h,d,u,o);else{if(0===s.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var e=t===n.CLOSE;e&&!u&&s.push(s[0]),this._renderer.endShape(t,s,l,h,d,u,o),l=!1,h=!1,d=!1,u=!1,p=!0,e&&s.pop()}return this},r.prototype.quadraticVertex=function(t,e,i,r){if(this._contourInited){var o={};return o.x=t,o.y=e,o.x3=i,o.y3=r,o.type=n.QUADRATIC,this._contourVertices.push(o),this}if(!(s.length>0))throw"vertex() must be used once before calling quadraticVertex()";d=!0;for(var h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];return h.isVert=!1,u?a.push(h):s.push(h),this},r.prototype.vertex=function(t,e,i){if(this._renderer.isP3D)this._renderer.vertex(t,e,i);else{var r=[];r.isVert=!0,r[0]=t,r[1]=e,r[2]=0,r[3]=0,r[4]=0,r[5]=this._renderer._getFill(),r[6]=this._renderer._getStroke(),i&&(r.moveTo=i),u?(0===a.length&&(r.moveTo=!0),a.push(r)):s.push(r)}return this},e.exports=r},{"./constants":4,"./core":5}],19:[function(t,e,i){"use strict";function r(t){var e=3.5*t|0;if(e=1>e?1:248>e?e:248,s!==e){s=e,a=1+s<<1,h=new Int32Array(a),l=new Array(a);for(var i=0;a>i;i++)l[i]=new Int32Array(256);for(var r,n,o,d,u=1,p=e-1;e>u;u++){h[e+u]=h[p]=n=p*p,o=l[e+u],d=l[p--];for(var c=0;256>c;c++)o[c]=d[c]=n*c}r=h[e]=e*e,o=l[e];for(var m=0;256>m;m++)o[m]=r*m}}function n(t,e){for(var i=o._toPixels(t),n=t.width,d=t.height,u=n*d,p=new Int32Array(u),c=0;u>c;c++)p[c]=o._getARGB(i,c);var m,f,g,_,y,v,x,w,C,E,R=new Int32Array(u),M=new Int32Array(u),I=new Int32Array(u),T=new Int32Array(u),S=0;r(e);var D,b,P,L;for(b=0;d>b;b++){for(D=0;n>D;D++){if(_=g=f=y=m=0,v=D-s,0>v)E=-v,v=0;else{if(v>=n)break;E=0}for(P=E;a>P&&!(v>=n);P++){var F=p[v+S];L=l[P],y+=L[(-16777216&F)>>>24],f+=L[(16711680&F)>>16],g+=L[(65280&F)>>8],_+=L[255&F],m+=h[P],v++}x=S+D,R[x]=y/m,M[x]=f/m,I[x]=g/m,T[x]=_/m}S+=n}for(S=0,w=-s,C=w*n,b=0;d>b;b++){for(D=0;n>D;D++){if(_=g=f=y=m=0,0>w)E=x=-w,v=D;else{if(w>=d)break;E=0,x=w,v=D+C}for(P=E;a>P&&!(x>=d);P++)L=l[P],y+=L[R[v]],f+=L[M[v]],g+=L[I[v]],_+=L[T[v]],m+=h[P],x++,v+=n;p[D+S]=y/m<<24|f/m<<16|g/m<<8|_/m}S+=n,C+=n,w++}o._setPixels(i,p)}var o={};o._toPixels=function(t){return t instanceof ImageData?t.data:t.getContext("2d").getImageData(0,0,t.width,t.height).data},o._getARGB=function(t,e){var i=4*e;return t[i+3]<<24&4278190080|t[i]<<16&16711680|t[i+1]<<8&65280|255&t[i+2]},o._setPixels=function(t,e){for(var i=0,r=0,n=t.length;n>r;r++)i=4*r,t[i+0]=(16711680&e[r])>>>16,t[i+1]=(65280&e[r])>>>8,t[i+2]=255&e[r],t[i+3]=(4278190080&e[r])>>>24},o._toImageData=function(t){return t instanceof ImageData?t:t.getContext("2d").getImageData(0,0,t.width,t.height)},o._createImageData=function(t,e){return o._tmpCanvas=document.createElement("canvas"),o._tmpCtx=o._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(t,e)},o.apply=function(t,e,i){var r=t.getContext("2d"),n=r.getImageData(0,0,t.width,t.height),o=e(n,i);o instanceof ImageData?r.putImageData(o,0,0,0,0,t.width,t.height):r.putImageData(n,0,0,0,0,t.width,t.height)},o.threshold=function(t,e){var i=o._toPixels(t);void 0===e&&(e=.5);for(var r=Math.floor(255*e),n=0;n<i.length;n+=4){var s,a=i[n],h=i[n+1],l=i[n+2],d=.2126*a+.7152*h+.0722*l;s=d>=r?255:0,i[n]=i[n+1]=i[n+2]=s}},o.gray=function(t){for(var e=o._toPixels(t),i=0;i<e.length;i+=4){var r=e[i],n=e[i+1],s=e[i+2],a=.2126*r+.7152*n+.0722*s;e[i]=e[i+1]=e[i+2]=a}},o.opaque=function(t){for(var e=o._toPixels(t),i=0;i<e.length;i+=4)e[i+3]=255;return e},o.invert=function(t){for(var e=o._toPixels(t),i=0;i<e.length;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]},o.posterize=function(t,e){var i=o._toPixels(t);if(2>e||e>255)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var r=e-1,n=0;n<i.length;n+=4){var s=i[n],a=i[n+1],h=i[n+2];i[n]=255*(s*e>>8)/r,i[n+1]=255*(a*e>>8)/r,i[n+2]=255*(h*e>>8)/r}},o.dilate=function(t){for(var e,i,r,n,s,a,h,l,d,u,p,c,m,f,g,_,y,v=o._toPixels(t),x=0,w=v.length?v.length/4:0,C=new Int32Array(w);w>x;)for(e=x,i=x+t.width;i>x;)r=n=o._getARGB(v,x),h=x-1,a=x+1,l=x-t.width,d=x+t.width,e>h&&(h=x),a>=i&&(a=x),0>l&&(l=0),d>=w&&(d=x),c=o._getARGB(v,l),p=o._getARGB(v,h),m=o._getARGB(v,d),u=o._getARGB(v,a),s=77*(r>>16&255)+151*(r>>8&255)+28*(255&r),g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),f=77*(u>>16&255)+151*(u>>8&255)+28*(255&u),_=77*(c>>16&255)+151*(c>>8&255)+28*(255&c),y=77*(m>>16&255)+151*(m>>8&255)+28*(255&m),g>s&&(n=p,s=g),f>s&&(n=u,s=f),_>s&&(n=c,s=_),y>s&&(n=m,s=y),C[x++]=n;o._setPixels(v,C)},o.erode=function(t){for(var e,i,r,n,s,a,h,l,d,u,p,c,m,f,g,_,y,v=o._toPixels(t),x=0,w=v.length?v.length/4:0,C=new Int32Array(w);w>x;)for(e=x,i=x+t.width;i>x;)r=n=o._getARGB(v,x),h=x-1,a=x+1,l=x-t.width,d=x+t.width,e>h&&(h=x),a>=i&&(a=x),0>l&&(l=0),d>=w&&(d=x),c=o._getARGB(v,l),p=o._getARGB(v,h),m=o._getARGB(v,d),u=o._getARGB(v,a),s=77*(r>>16&255)+151*(r>>8&255)+28*(255&r),g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),f=77*(u>>16&255)+151*(u>>8&255)+28*(255&u),_=77*(c>>16&255)+151*(c>>8&255)+28*(255&c),y=77*(m>>16&255)+151*(m>>8&255)+28*(255&m),s>g&&(n=p,s=g),s>f&&(n=u,s=f),s>_&&(n=c,s=_),s>y&&(n=m,s=y),C[x++]=n;o._setPixels(v,C)};var s,a,h,l;o.blur=function(t,e){n(t,e)},e.exports=o},{}],20:[function(t,e,i){e.exports={degreesToRadians:function(t){return 2*Math.PI*t/360},radiansToDegrees:function(t){return 360*t/(2*Math.PI)}}},{}],21:[function(t,e,i){"use strict";var r=t("../core/core"),n=t("../math/polargeometry"),o=t("../core/constants"),s="undefined"!=typeof Float32Array?Float32Array:Array;r.Matrix=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];return t[0]instanceof r?(this.p5=t[0],"mat3"===t[1]?this.mat3=t[2]||new s([1,0,0,0,1,0,0,0,1]):this.mat4=t[1]||new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):"mat3"===t[0]?this.mat3=t[1]||new s([1,0,0,0,1,0,0,0,1]):this.mat4=t[0]||new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},r.Matrix.prototype.set=function(t){return t instanceof r.Matrix?(this.mat4=t.mat4,this):t instanceof s?(this.mat4=t,this):this},r.Matrix.prototype.get=function(){return new r.Matrix(this.mat4)},r.Matrix.prototype.copy=function(){var t=new r.Matrix;return t.mat4[0]=this.mat4[0],t.mat4[1]=this.mat4[1],t.mat4[2]=this.mat4[2],t.mat4[3]=this.mat4[3],t.mat4[4]=this.mat4[4],t.mat4[5]=this.mat4[5],t.mat4[6]=this.mat4[6],t.mat4[7]=this.mat4[7],t.mat4[8]=this.mat4[8],t.mat4[9]=this.mat4[9],t.mat4[10]=this.mat4[10],t.mat4[11]=this.mat4[11],t.mat4[12]=this.mat4[12],t.mat4[13]=this.mat4[13],t.mat4[14]=this.mat4[14],t.mat4[15]=this.mat4[15],t},r.Matrix.identity=function(){return new r.Matrix},r.Matrix.prototype.transpose=function(t){var e,i,n,o,a,h;return t instanceof r.Matrix?(e=t.mat4[1],i=t.mat4[2],n=t.mat4[3],o=t.mat4[6],a=t.mat4[7],h=t.mat4[11],this.mat4[0]=t.mat4[0],this.mat4[1]=t.mat4[4],this.mat4[2]=t.mat4[8],this.mat4[3]=t.mat4[12],this.mat4[4]=e,this.mat4[5]=t.mat4[5],this.mat4[6]=t.mat4[9],this.mat4[7]=t.mat4[13],this.mat4[8]=i,this.mat4[9]=o,this.mat4[10]=t.mat4[10],this.mat4[11]=t.mat4[14],this.mat4[12]=n,this.mat4[13]=a,this.mat4[14]=h,this.mat4[15]=t.mat4[15]):t instanceof s&&(e=t[1],i=t[2],n=t[3],o=t[6],a=t[7],h=t[11],this.mat4[0]=t[0],this.mat4[1]=t[4],this.mat4[2]=t[8],this.mat4[3]=t[12],this.mat4[4]=e,this.mat4[5]=t[5],this.mat4[6]=t[9],this.mat4[7]=t[13],this.mat4[8]=i,this.mat4[9]=o,this.mat4[10]=t[10],this.mat4[11]=t[14],this.mat4[12]=n,this.mat4[13]=a,this.mat4[14]=h,this.mat4[15]=t[15]),this},r.Matrix.prototype.invert=function(t){var e,i,n,o,a,h,l,d,u,p,c,m,f,g,_,y;t instanceof r.Matrix?(e=t.mat4[0],i=t.mat4[1],n=t.mat4[2],o=t.mat4[3],a=t.mat4[4],h=t.mat4[5],l=t.mat4[6],d=t.mat4[7],u=t.mat4[8],p=t.mat4[9],c=t.mat4[10],m=t.mat4[11],f=t.mat4[12],g=t.mat4[13],_=t.mat4[14],y=t.mat4[15]):t instanceof s&&(e=t[0],i=t[1],n=t[2],o=t[3],a=t[4],h=t[5],l=t[6],d=t[7],u=t[8],p=t[9],c=t[10],m=t[11],f=t[12],g=t[13],_=t[14],y=t[15]);var v=e*h-i*a,x=e*l-n*a,w=e*d-o*a,C=i*l-n*h,E=i*d-o*h,R=n*d-o*l,M=u*g-p*f,I=u*_-c*f,T=u*y-m*f,S=p*_-c*g,D=p*y-m*g,b=c*y-m*_,P=v*b-x*D+w*S+C*T-E*I+R*M;return P?(P=1/P,this.mat4[0]=(h*b-l*D+d*S)*P,this.mat4[1]=(n*D-i*b-o*S)*P,this.mat4[2]=(g*R-_*E+y*C)*P,this.mat4[3]=(c*E-p*R-m*C)*P,this.mat4[4]=(l*T-a*b-d*I)*P,this.mat4[5]=(e*b-n*T+o*I)*P,this.mat4[6]=(_*w-f*R-y*x)*P,this.mat4[7]=(u*R-c*w+m*x)*P,this.mat4[8]=(a*D-h*T+d*M)*P,this.mat4[9]=(i*T-e*D-o*M)*P,this.mat4[10]=(f*E-g*w+y*v)*P,this.mat4[11]=(p*w-u*E-m*v)*P,this.mat4[12]=(h*I-a*S-l*M)*P,this.mat4[13]=(e*S-i*I+n*M)*P,this.mat4[14]=(g*x-f*C-_*v)*P,this.mat4[15]=(u*C-p*x+c*v)*P,this):null},r.Matrix.prototype.invert3x3=function(){var t=this.mat3[0],e=this.mat3[1],i=this.mat3[2],r=this.mat3[3],n=this.mat3[4],o=this.mat3[5],s=this.mat3[6],a=this.mat3[7],h=this.mat3[8],l=h*n-o*a,d=-h*r+o*s,u=a*r-n*s,p=t*l+e*d+i*u;return p?(p=1/p,this.mat3[0]=l*p,this.mat3[1]=(-h*e+i*a)*p,this.mat3[2]=(o*e-i*n)*p,this.mat3[3]=d*p,this.mat3[4]=(h*t-i*s)*p,this.mat3[5]=(-o*t+i*r)*p,this.mat3[6]=u*p,this.mat3[7]=(-a*t+e*s)*p,this.mat3[8]=(n*t-e*r)*p,this):null},r.Matrix.prototype.transpose3x3=function(t){var e=t[1],i=t[2],r=t[5];return this.mat3[1]=t[3],this.mat3[2]=t[6],this.mat3[3]=e,this.mat3[5]=t[7],this.mat3[6]=i,this.mat3[7]=r,this},r.Matrix.prototype.inverseTranspose=function(t){return void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=t.mat4[0],this.mat3[1]=t.mat4[1],this.mat3[2]=t.mat4[2],this.mat3[3]=t.mat4[4],this.mat3[4]=t.mat4[5],this.mat3[5]=t.mat4[6],this.mat3[6]=t.mat4[8],this.mat3[7]=t.mat4[9],this.mat3[8]=t.mat4[10]),this.invert3x3().transpose3x3(this.mat3),this},r.Matrix.prototype.determinant=function(){var t=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],e=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],i=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],r=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],n=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],o=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],s=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],a=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],h=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],l=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],d=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],u=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return t*u-e*d+i*l+r*h-n*a+o*s},r.Matrix.prototype.mult=function(t){var e=new s(16),i=new s(16);t instanceof r.Matrix?i=t.mat4:t instanceof s&&(i=t);var n=this.mat4[0],o=this.mat4[1],a=this.mat4[2],h=this.mat4[3];return e[0]=n*i[0]+o*i[4]+a*i[8]+h*i[12],e[1]=n*i[1]+o*i[5]+a*i[9]+h*i[13],e[2]=n*i[2]+o*i[6]+a*i[10]+h*i[14],e[3]=n*i[3]+o*i[7]+a*i[11]+h*i[15],n=this.mat4[4],o=this.mat4[5],a=this.mat4[6],h=this.mat4[7],e[4]=n*i[0]+o*i[4]+a*i[8]+h*i[12],e[5]=n*i[1]+o*i[5]+a*i[9]+h*i[13],e[6]=n*i[2]+o*i[6]+a*i[10]+h*i[14],e[7]=n*i[3]+o*i[7]+a*i[11]+h*i[15],n=this.mat4[8],o=this.mat4[9],a=this.mat4[10],h=this.mat4[11],e[8]=n*i[0]+o*i[4]+a*i[8]+h*i[12],e[9]=n*i[1]+o*i[5]+a*i[9]+h*i[13],e[10]=n*i[2]+o*i[6]+a*i[10]+h*i[14],e[11]=n*i[3]+o*i[7]+a*i[11]+h*i[15],
n=this.mat4[12],o=this.mat4[13],a=this.mat4[14],h=this.mat4[15],e[12]=n*i[0]+o*i[4]+a*i[8]+h*i[12],e[13]=n*i[1]+o*i[5]+a*i[9]+h*i[13],e[14]=n*i[2]+o*i[6]+a*i[10]+h*i[14],e[15]=n*i[3]+o*i[7]+a*i[11]+h*i[15],this.mat4=e,this},r.Matrix.prototype.scale=function(){for(var t,e,i,n=new Array(arguments.length),o=0;o<n.length;++o)n[o]=arguments[o];n[0]instanceof r.Vector?(t=n[0].x,e=n[0].y,i=n[0].z):n[0]instanceof Array&&(t=n[0][0],e=n[0][1],i=n[0][2]);var a=new s(16);return a[0]=this.mat4[0]*t,a[1]=this.mat4[1]*t,a[2]=this.mat4[2]*t,a[3]=this.mat4[3]*t,a[4]=this.mat4[4]*e,a[5]=this.mat4[5]*e,a[6]=this.mat4[6]*e,a[7]=this.mat4[7]*e,a[8]=this.mat4[8]*i,a[9]=this.mat4[9]*i,a[10]=this.mat4[10]*i,a[11]=this.mat4[11]*i,a[12]=this.mat4[12],a[13]=this.mat4[13],a[14]=this.mat4[14],a[15]=this.mat4[15],this.mat4=a,this},r.Matrix.prototype.rotate=function(t,e){var i,s,a,h,l;this.p5?this.p5._angleMode===o.DEGREES&&(h=n.degreesToRadians(t)):h=t,e instanceof r.Vector?(i=e.x,s=e.y,a=e.z):e instanceof Array&&(i=e[0],s=e[1],a=e[2]),l=Math.sqrt(i*i+s*s+a*a),i*=1/l,s*=1/l,a*=1/l;var d=this.mat4[0],u=this.mat4[1],p=this.mat4[2],c=this.mat4[3],m=this.mat4[4],f=this.mat4[5],g=this.mat4[6],_=this.mat4[7],y=this.mat4[8],v=this.mat4[9],x=this.mat4[10],w=this.mat4[11],C=Math.sin(h),E=Math.cos(h),R=1-E,M=i*i*R+E,I=s*i*R+a*C,T=a*i*R-s*C,S=i*s*R-a*C,D=s*s*R+E,b=a*s*R+i*C,P=i*a*R+s*C,L=s*a*R-i*C,F=a*a*R+E;return this.mat4[0]=d*M+m*I+y*T,this.mat4[1]=u*M+f*I+v*T,this.mat4[2]=p*M+g*I+x*T,this.mat4[3]=c*M+_*I+w*T,this.mat4[4]=d*S+m*D+y*b,this.mat4[5]=u*S+f*D+v*b,this.mat4[6]=p*S+g*D+x*b,this.mat4[7]=c*S+_*D+w*b,this.mat4[8]=d*P+m*L+y*F,this.mat4[9]=u*P+f*L+v*F,this.mat4[10]=p*P+g*L+x*F,this.mat4[11]=c*P+_*L+w*F,this},r.Matrix.prototype.translate=function(t){var e=t[0],i=t[1],r=t[2]||0;this.mat4[12]=this.mat4[0]*e+this.mat4[4]*i+this.mat4[8]*r+this.mat4[12],this.mat4[13]=this.mat4[1]*e+this.mat4[5]*i+this.mat4[9]*r+this.mat4[13],this.mat4[14]=this.mat4[2]*e+this.mat4[6]*i+this.mat4[10]*r+this.mat4[14],this.mat4[15]=this.mat4[3]*e+this.mat4[7]*i+this.mat4[11]*r+this.mat4[15]},r.Matrix.prototype.rotateX=function(t){this.rotate(t,[1,0,0])},r.Matrix.prototype.rotateY=function(t){this.rotate(t,[0,1,0])},r.Matrix.prototype.rotateZ=function(t){this.rotate(t,[0,0,1])},r.Matrix.prototype.perspective=function(t,e,i,r){var n=1/Math.tan(t/2),o=1/(i-r);return this.mat4[0]=n/e,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=n,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(r+i)*o,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*r*i*o,this.mat4[15]=0,this},r.Matrix.prototype.ortho=function(t,e,i,r,n,o){var s=1/(t-e),a=1/(i-r),h=1/(n-o);return this.mat4[0]=-2*s,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*a,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*h,this.mat4[11]=0,this.mat4[12]=(t+e)*s,this.mat4[13]=(r+i)*a,this.mat4[14]=(o+n)*h,this.mat4[15]=1,this},e.exports=r.Matrix},{"../core/constants":4,"../core/core":5,"../math/polargeometry":20}],22:[function(t,e,i){"use strict";var r=t("../core/core"),n=t("./shader");t("../core/p5.Renderer"),t("./p5.Matrix");var o=[],s={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};r.RendererGL=function(t,e,i){return r.Renderer.call(this,t,e,i),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0,this._curCamera=null,this.uMVMatrix=new r.Matrix,this.uPMatrix=new r.Matrix,this.uNMatrix=new r.Matrix("mat3"),this.gHash={},this.mHash={},this.isImmediateDrawing=!1,this.immediateMode={},this.curFillColor=[.5,.5,.5,1],this.curStrokeColor=[.5,.5,.5,1],this.pointSize=5,this},r.RendererGL.prototype=Object.create(r.Renderer.prototype),r.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",s)||this.canvas.getContext("experimental-webgl",s),null===this.drawingContext)throw new Error("Error creating webgl context");console.log("p5.RendererGL: enabled webgl context");var t=this.drawingContext;t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}catch(e){throw new Error(e)}},r.RendererGL.prototype._setDefaultCamera=function(){if(null===this._curCamera){var t=this.width,e=this.height;this.uPMatrix=r.Matrix.identity();var i=this.height/2/Math.tan(30*Math.PI/180);this.uPMatrix.perspective(60/180*Math.PI,t/e,.1*i,10*i),this._curCamera="default"}},r.RendererGL.prototype._update=function(){this.uMVMatrix=r.Matrix.identity(),this.translate(0,0,-(this.height/2)/Math.tan(30*Math.PI/180)),this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0},r.RendererGL.prototype.background=function(){var t=this.GL,e=this._pInst.color.apply(this._pInst,arguments),i=e.levels[0]/255,r=e.levels[1]/255,n=e.levels[2]/255,o=e.levels[3]/255;t.clearColor(i,r,n,o),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},r.RendererGL.prototype._initShaders=function(t,e,i){var r=this.GL,o=r.createShader(r.VERTEX_SHADER);if(r.shaderSource(o,n[t]),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS))return alert("Yikes! An error occurred compiling the shaders:"+r.getShaderInfoLog(o)),null;var s=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(s,n[e]),r.compileShader(s),!r.getShaderParameter(s,r.COMPILE_STATUS))return alert("Darn! An error occurred compiling the shaders:"+r.getShaderInfoLog(s)),null;var a=r.createProgram();return r.attachShader(a,o),r.attachShader(a,s),r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)||alert("Snap! Error linking shader program"),this._getLocation(a,i),a},r.RendererGL.prototype._getLocation=function(t,e){var i=this.GL;i.useProgram(t),t.uPMatrixUniform=i.getUniformLocation(t,"uProjectionMatrix"),t.uMVMatrixUniform=i.getUniformLocation(t,"uModelViewMatrix"),void 0===e&&(t.uNMatrixUniform=i.getUniformLocation(t,"uNormalMatrix"),t.samplerUniform=i.getUniformLocation(t,"uSampler"))},r.RendererGL.prototype._setUniform1f=function(t,e,i){var r=this.GL,n=this.mHash[t];return r.useProgram(n),n[e]=r.getUniformLocation(n,e),r.uniform1f(n[e],i),this},r.RendererGL.prototype._setMatrixUniforms=function(t){var e=this.GL,i=this.mHash[t];e.useProgram(i),e.uniformMatrix4fv(i.uPMatrixUniform,!1,this.uPMatrix.mat4),e.uniformMatrix4fv(i.uMVMatrixUniform,!1,this.uMVMatrix.mat4),this.uNMatrix.inverseTranspose(this.uMVMatrix),e.uniformMatrix3fv(i.uNMatrixUniform,!1,this.uNMatrix.mat3)},r.RendererGL.prototype._getShader=function(t,e,i){var r=t+"|"+e;if(!this.materialInHash(r)){var n=this._initShaders(t,e,i);this.mHash[r]=n}return this.curShaderId=r,this.mHash[this.curShaderId]},r.RendererGL.prototype._getCurShaderId=function(){if("fill"!==this.drawMode&&void 0===this.curShaderId){var t="normalVert|normalFrag",e=this._initShaders("normalVert","normalFrag");this.mHash[t]=e,this.curShaderId=t}else this.isImmediateDrawing&&"fill"===this.drawMode&&this._getShader("immediateVert","vertexColorFrag",!0);return this.curShaderId},r.RendererGL.prototype.fill=function(t,e,i,r){var n,o=this.GL,s=this._applyColorBlend.apply(this,arguments);return this.curFillColor=s,this.drawMode="fill",this.isImmediateDrawing?(n=this._getShader("immediateVert","vertexColorFrag"),o.useProgram(n)):(n=this._getShader("normalVert","basicFrag"),o.useProgram(n),n.uMaterialColor=o.getUniformLocation(n,"uMaterialColor"),o.uniform4f(n.uMaterialColor,s[0],s[1],s[2],s[3])),this},r.RendererGL.prototype.stroke=function(t,e,i,r){var n=this._pInst.color.apply(this._pInst,arguments),o=n._array;return this.curStrokeColor=o,this.drawMode="stroke",this},r.RendererGL.prototype._strokeCheck=function(){if("stroke"===this.drawMode)throw new Error("stroke for shapes in 3D not yet implemented, use fill for now :(")},r.RendererGL.prototype.strokeWeight=function(t){return this.pointSize=t,this},r.RendererGL.prototype.geometryInHash=function(t){return void 0!==this.gHash[t]},r.RendererGL.prototype.materialInHash=function(t){return void 0!==this.mHash[t]},r.RendererGL.prototype.resize=function(t,e){var i=this.GL;r.Renderer.prototype.resize.call(this,t,e),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),"default"===this._curCamera&&(this._curCamera=null,this._setDefaultCamera())},r.RendererGL.prototype.clear=function(){var t=this.GL;t.clearColor(arguments[0],arguments[1],arguments[2],arguments[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},r.RendererGL.prototype.translate=function(t,e,i){return this.uMVMatrix.translate([t,-e,i]),this},r.RendererGL.prototype.scale=function(t,e,i){return this.uMVMatrix.scale([t,e,i]),this},r.RendererGL.prototype.rotate=function(t,e){return this.uMVMatrix.rotate(t,e),this},r.RendererGL.prototype.rotateX=function(t){return this.rotate(t,[1,0,0]),this},r.RendererGL.prototype.rotateY=function(t){return this.rotate(t,[0,1,0]),this},r.RendererGL.prototype.rotateZ=function(t){return this.rotate(t,[0,0,1]),this},r.RendererGL.prototype.push=function(){o.push(this.uMVMatrix.copy())},r.RendererGL.prototype.pop=function(){if(0===o.length)throw new Error("Invalid popMatrix!");this.uMVMatrix=o.pop()},r.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=r.Matrix.identity(),this.translate(0,0,-800),this},r.RendererGL.prototype._applyTextProperties=function(){console.error("text commands not yet implemented in webgl")},e.exports=r.RendererGL},{"../core/core":5,"../core/p5.Renderer":12,"./p5.Matrix":21,"./shader":23}],23:[function(t,e,i){e.exports={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nuniform vec3 uAmbientColor[8];\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nvarying vec3 vVertexNormal;\nvarying vec2 vVertTexCoord;\nvarying vec3 vLightWeighting;\n\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\n\nvoid main(void){\n\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\n  vec3 vertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertexNormal = vertexNormal;\n  vVertTexCoord = aTexCoord;\n\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\n\n  float shininess = 32.0;\n  float specularFactor = 2.0;\n  float diffuseFactor = 0.3;\n\n  for(int i = 0; i < 8; i++){\n    if(uAmbientLightCount == i) break;\n    ambientLightFactor += uAmbientColor[i];\n  }\n\n  for(int j = 0; j < 8; j++){\n    if(uDirectionalLightCount == j) break;\n    vec3 dir = uLightingDirection[j];\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\n  }\n\n  for(int k = 0; k < 8; k++){\n    if(uPointLightCount == k) break;\n    vec3 loc = uPointLightLocation[k];\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\n\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\n\n    //factor2 for specular\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\n      +  directionalLightWeighting * diffuseFactor);\n  }\n\n  if(!uSpecular){\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\n  }else{\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\n  }\n\n}\n",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vLightWeighting;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  if(!isTexture){\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\n  }else{\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\n    if(vLightWeighting == vec3(0., 0., 0.)){\n      gl_FragColor = textureColor;\n    }else{\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a);\n    }\n  }\n}"}},{}]},{},[5,10,11,13,4,7,14,1,2,6,18,16,17,9])(18)});